---
weight: 30
category: "messaging"
subcategory: "customer-chat-api"
title: "Web API Reference"
tagline: "Interact with the chat as a Customer."
desc: "Use the Customer Chat Web API to interact as a Customer."
apiVersion: "3.4"
---

import { openChatWindow } from "../../../../utils/index";

# Introduction

## Versioning

This document describes the **Customer Chat Web API v3.4**. This is the developer preview version that provides a preview of the upcoming changes to the API. **It's not open to public use.** However, if you want to test some features, contact us at developers@livechat.com or <a href="#open-chat" onClick={openChatWindow}>ask on the chat</a>, and we'll give you access.

## What is Web API

Web API is similar to REST API. Client can send a **request message** that results in getting a **response message**. It's also possible to get webhooks.

## When to use Web API

If you're wondering which API to use - Customer Chat **RTM API** or **Web API**, keep on reading.

**Web API** allows for building stateless integrations. The communication is done via **XHR requests**. The implementation is easier than with RTM API, but you need to take possible time delays into consideration.

**Not what you're looking for?** Perhaps, you need to use [**Customer Chat RTM API**](rtm-reference) instead.

## Access

**Customer authentication** is handled with access tokens. Find out how to get an **access token** from [Customer authorization flow](/authorization/authorizing-api-calls/#customer-authorization-flow). Take note **it's not the same** token you would you for the Agent Chat or Configuration API.

## Data centers

LiveChat system operates in two data centers: `dal` (USA) and `fra` (Europe). The default data center is `dal`.

All the LiveChat OAuth2.0 access tokens have a prefix: `dal-` or `fra-`. This prefix indicates the data center they belong to. If you need to specify the data center while making an API call, simply add the `X-Region: <token_prefix>` optional header.

Summing up, if the user token starts with `fra-`, you should add the `X-Region: fra` header. If the token starts with, `dal-` you donâ€™t have to specify the header.

## Pagination

Pagination is a mechanism that allows splitting the database output into more manageable chunks of data.
Based on the `limit` and `sort order` parameters, pagination is able to decide how many records will be returned at once and whether it should fetch the oldest or the latest data first.

Any filters that could be applied should be provided in first pagination request. In the response, you'll get the `next_page_id` and `previous_page_id` parameters.
You should make the subsequent request using one of these parameters as `page_id`, depending on the direction of iteration: forward or backward.

The `filters`, `limit`, and `sort_order` parameters can't be provided along with `page_id`.

ðŸ’¡ The maximum duration of the `page_id` parameter before it expires is one month.

# Data structures

To find sample payloads of **events**, **users**, and **other common structures** such as chats or threads [visit the Data structures](/messaging/customer-chat-api/v3.4/data-structures) document.

# Methods

<Section>

<Text>

| HTTP method | The API endpoint                                            | Methods                                                                                                                                                                                                                                                              |
| ----------- | ----------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **POST**    | `https://api.livechatinc.com/v3.4/customer/action/<action>` | All except for **List License Properties**, **List Group Properties**, **Dynamic Config**, **Config** and **Localization**                                                                                                                                           |
| **GET**     | `https://api.livechatinc.com/v3.4/customer/action/<action>` | [**List License Properties**](#list-license-properties), [**List Group Properties**](#list-group-properties), [**Get Dynamic Configuration**](#get-dynamic-configuration), [**Get Configuration**](#get-configuration) and [**Get Localization**](#get-localization) |

| Header          |                   Value                    |                                                                                                                                                                                                         Notes |
| --------------- | :----------------------------------------: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| `X-API-Version` |                   `3.4`                    |                                                                                                                                                         Not needed if you specify the API version in the URL. |
| `Content-Type`  | `multipart/form-data; boundary=<boundary>` |                                                                                                                                                          Valid for the [**Upload File**](#upload-file) method |
| `Content-Type`  |             `application/json`             |                                                                                                                                                             Valid for every method except for **Upload File** |
| `Authorization` |              `Bearer <token>`              | Customer access token. It's not the same token you would use for the Agent Chat or Configuration API. Not needed for **Get License Properties** and **Get Group Properties**. [Read more...](#authentication) |

Every request to Customer Chat API needs to have the following **query string parameters**:

| Query string parameter | Data type |               Notes | Methods |
| ---------------------- | :-------: | ------------------: | ------- |
| `license_id`           | `integer` | LiveChat account ID | All     |

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  https://api.livechatinc.com/v3.4/customer/action?license_id=<license_id> \
  -H 'Content-Type: <content-type>' \
  -H 'Authorization: Bearer <customer_access_token>' \
  -d '{
    // payload
    }'
```

</CodeSample>

</Code>

</Section>

## Available methods

|                   |                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| ----------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Chats**         | [`list_chats`](#list-chats) [`list_threads`](#list-threads) [`get_chat`](#get-chat) [`start_chat`](#start-chat) [`resume_chat`](#resume-chat) [`deactivate_chat`](#deactivate-chat)                                                                                                                                                                                                                                                         |
| **Configuration** | [`get_dynamic_configuration`](#get-dynamic-configuration) [`get_configuration`](#get-configuration)                                                                                                                                                                                                                                                                                                                                         |
| **Events**        | [`send_event`](#send-event) [`upload_file`](#upload-file) [`send_rich_message_postback`](#send-rich-message-postback) [`send_sneak_peek`](#send-sneak-peek)                                                                                                                                                                                                                                                                                 |
| **Localization**  | [`get_localization`](#get-localization)                                                                                                                                                                                                                                                                                                                                                                                                     |
| **Properties**    | [`update_chat_properties`](#update-chat-properties) [`delete_chat_properties`](#delete-chat-properties) [`update_thread_properties`](#update-thread-properties) [`delete_thread_properties`](#delete-thread-properties) [`update_event_properties`](#update-event-properties) [`delete_event_properties`](#delete-event-properties) [`list_license_properties`](#list-license-properties) [`list_group_properties`](#list-group-properties) |
| **Customers**     | [`update_customer`](#update-customer) [`set_customer_session_fields`](#set-customer-session-fields) [`get_customer`](#get-customer)                                                                                                                                                                                                                                                                                                         |
| **Status**        | [`list_group_statuses`](#list-group-statuses)                                                                                                                                                                                                                                                                                                                                                                                               |
| **Other**         | [`check_goals`](#check-goals) [`get_form`](#get-form) [`get_predicted_agent`](#get-predicted-agent) [`get_url_info`](#get-url-info) [`mark_events_as_seen`](#mark-events-as-seen) [`accept_greeting`](#accept-greeting) [`cancel_greeting`](#cancel-greeting) [`request_email_verification`](#request-email-verification)                                                                                                                   |

## Chats

<Section>

<Text>

### List Chats

It returns [summaries](/messaging/customer-chat-api/v3.4/data-structures/#chat-summaries) of the chats a Customer participated in.

#### Specifics

|                        |                                                               |
| ---------------------- | ------------------------------------------------------------- |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/list_chats` |
| **RTM API equivalent** | [`list_chats`](rtm-reference/#list-chats)                     |
| **Webhook**            | -                                                             |

#### Request

| Parameter    | Required | Type     | Notes                                                                                                        |
| ------------ | -------- | -------- | ------------------------------------------------------------------------------------------------------------ |
| `limit`      | No       | `number` | Default: 10, maximum: 25                                                                                     |
| `sort_order` | No       | `string` | Possible values: `asc`, `desc` (default). Chat summaries are sorted by the creation date of its last thread. |
| `page_id`    | No       | `string` |                                                                                                              |

#### Response

| Field              | Data type | Notes                                                                                                           |
| ------------------ | --------- | --------------------------------------------------------------------------------------------------------------- |
| `total_chats`      | `number`  | An estimated number. The real number of found chats can slightly differ.                                        |
| `next_page_id`     | `string`  | In relation to `page_id` specified in the request. Appears in the response only when there's the next page.     |
| `previous_page_id` | `string`  | In relation to `page_id` specified in the request. Appears in the response only when there's the previous page. |
| `chats_summary`    | `array`   | Array of [Chat summary](/messaging/customer-chat-api/v3.4/data-structures/#chat-summaries) data structures.     |

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  https://api.livechatinc.com/v3.4/customer/action/list_chats?license_id=<license_id> \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <customer_access_token>' \
  -d '{}'
```

</CodeSample>

<CodeResponse>

```json
{
  "next_page_id": "MTUxNzM5ODEzMTQ5Ng==",
  "chats_summary": [{
    "id": "PJ0MRSHTDG",
    "last_thread_id": "K600PKZON8",
    "last_thread_created_at": "2020-05-08T08:22:21.128420Z",
    "last_event_per_type": {
      "message": {
        "thread_id": "K600PKZON9",
        "thread_created_at": "2020-05-07T07:11:28.288340Z",
        "event": {
          "id": "Q298LUVPRH_1",
          "created_at": "2019-12-09T12:01:18.909000Z",
          "type": "message",
          "text": "hello world",
          "author_id": "b7eff798-f8df-4364-8059-649c35c9ed0c"
        }
      }
    },
    "users": [{
      "id": "b7eff798-f8df-4364-8059-649c35c9ed0c",
      "type": "customer",
      "present": true
    }, {
      "id": "b5657aff34dd32e198160d54666df9d8",
      "name": "Agent Smith",
      "type": "agent",
      "present": true,
      "avatar": "https://example.com/avatar.png",
      "job_title": "Support Agent"
    }],
    "access": {
      "group_ids": [0]
    },
    "properties": {
      // "Properties" object
    },
    "active": true
  }],
  "total_chats": 1
}
```

</CodeResponse>

</Code>

</Section>

<Section>
<Text>

### List Threads

It returns threads that the current Customer has access to in a given chat.

#### Specifics

|                        |                                                                 |
| ---------------------- | --------------------------------------------------------------- |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/list_threads` |
| **RTM API equivalent** | [`list_threads`](rtm-reference/#list-threads)                   |
| **Webhook**            | -                                                               |

#### Request

| Parameter          | Required | Data type | Notes                                                                                                                                                                                                                                                       |
| ------------------ | -------- | --------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `chat_id`          | Yes      | `string`  |                                                                                                                                                                                                                                                             |
| `sort_order`       | No       | `string`  | Possible values: `asc` - oldest threads first and `desc` - newest threads first (default).                                                                                                                                                                  |
| `limit`            | No       | `number`  | Default: 3, maximum: 100                                                                                                                                                                                                                                    |
| `page_id`          | No       | `string`  |                                                                                                                                                                                                                                                             |
| `min_events_count` | No       | `number`  | Range: 1-100; Specifies the minimum number of events to be returned in the response. It's the **total** number of events, so they can come from more than one thread. You'll get as many latest threads as needed to meet the `min_events_count` condition. |

You cannot use both `limit` and `min_events_count` at the same time.

</Text>
<Code>
<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  https://api.livechatinc.com/v3.4/customer/action/list_threads \
  -H 'Authorization: Bearer <customer_access_token>' \
  -H 'Content-Type: application/json' \
  -d '{
      "chat_id": "PWJ8Y4THAV",
    }'
```

</CodeSample>

<CodeResponse>

```json
{
  "threads": [{
    "id": "K600PKZON8",
    "created_at": "2019-12-17T07:57:41.512000Z",
    "active": true,
    "user_ids": [
      "b7eff798-f8df-4364-8059-649c35c9ed0c",
      "bbb67d600796e9f277e360e842418833"
    ],
    "events": [{
      "id": "Q20N9CKRX2_1",
      "created_at": "2019-12-17T07:57:41.512000Z",
      "recipients": "all",
      "type": "message",
      "text": "Hello",
      "author_id": "bbb67d600796e9f277e360e842418833"
    }],
    "properties": {
      // "Property" object
    },
    "access": {
      "group_ids": [0]
    },
    "previous_thread_id": "K600PKZOM8", // optional
    "next_thread_id": "K600PKZOO8" // optional
  }],
  "found_threads": 42,
  "next_page_id": "MTUxNzM5ODEzMTQ5Ng==", // optional
  "previous_page_id": "MTUxNzM5ODEzMTQ5Nw==" // optional
}
```

</CodeResponse>

</Code>
</Section>

<Section>

<Text>

### Get Chat

#### Specifics

|                        |                                                             |
| ---------------------- | ----------------------------------------------------------- |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/get_chat` |
| **RTM API equivalent** | [`get_chat`](rtm-reference/#get-chat)                       |
| **Webhook**            | -                                                           |

#### Request

| Parameter   | Required | Data type | Notes                                  |
| ----------- | -------- | --------- | -------------------------------------- |
| `chat_id`   | Yes      | `string`  |                                        |
| `thread_id` | No       | `string`  | Default: the latest thread (if exists) |

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  https://api.livechatinc.com/v3.4/customer/action/get_chat?license_id=<license_id> \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <customer_access_token>' \
  -d '{
      "chat_id": "PJ0MRSHTDG",
      "thread_id": "K600PKZON8"
    }'
```

</CodeSample>

<CodeResponse>

```json
{
  "id": "PJ0MRSHTDG",
  "thread": {
    "id": "K600PKZON8",
    "created_at": "2020-05-07T07:11:28.288340Z",
    "active": true,
    "user_ids": [
      "b7eff798-f8df-4364-8059-649c35c9ed0c",
      "b5657aff34dd32e198160d54666df9d8"
    ],
    "events": [{
      "id": "Q20N9CKRX2_1",
      "created_at": "2019-12-17T07:57:41.512000Z",
      "type": "message",
      "text": "Hello",
      "author_id": "b5657aff34dd32e198160d54666df9d8"
    }],
    "properties": {
      "0805e283233042b37f460ed8fbf22160": {
        "string_property": "string_value"
      }
    },
    "access": {
      "group_ids": [0]
    },
    "previous_thread_id": "K600PKZOM8",
    "next_thread_id": "K600PKZOO8"
  },
  "users": [{
    "id": "b7eff798-f8df-4364-8059-649c35c9ed0c",
    "type": "customer",
    "present": true
  }, {
    "id": "b5657aff34dd32e198160d54666df9d8",
    "name": "Agent Smith",
    "type": "agent",
    "present": true,
    "avatar": "https://example.com/avatar.jpg",
    "job_title": "Support Agent"
  }],
  "access": {
    "group_ids": [0]
  },
  "properties": {
    "0805e283233042b37f460ed8fbf22160": {
      "string_property": "string_value"
    }
  }
}
```

</CodeResponse>

</Code>

</Section>

<Section>

<Text>

### Start Chat

Starts a chat.

The method updates the requester's `events_seen_up_to` as if they've seen all chat events.

#### Specifics

|                        |                                                               |
| ---------------------- | ------------------------------------------------------------- |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/start_chat` |
| **RTM API equivalent** | [`start_chat`](rtm-reference/#start-chat)                     |
| **Webhook**            | [`incoming_chat`](/management/webhooks/v3.4/#incoming_chat)   |

#### Request

| Parameter                | Required | Data type | Notes                                                                       |
| ------------------------ | -------- | --------- | --------------------------------------------------------------------------- |
| `chat`                   | No       | `object`  |                                                                             |
| `chat.properties`        | No       | `object`  | Initial chat properties                                                     |
| `chat.access`            | No       | `object`  | Chat access to set; default: all agents.                                    |
| `chat.thread`            | No       | `object`  |                                                                             |
| `chat.thread.events`     | No       | `array`   | Initial chat events array                                                   |
| `chat.thread.properties` | No       | `object`  | Initial thread properties                                                   |
| `active`                 | No       | `bool`    | When set to `false`, creates an inactive thread; default: `true`.           |
| `continuous`             | No       | `bool`    | Starts chat as continuous (online group is not required); default: `false`. |

#### Response

| Field       | Data type  | Notes                                                                                                                                                                   |
| ----------- | ---------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `chat_id`   | `string`   |                                                                                                                                                                         |
| `thread_id` | `string`   |                                                                                                                                                                         |
| `event_ids` | `[]string` | Returned only when the chat was started with initial events. Returns only the IDs of user-generated events; server-side generated events are not included in the array. |

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  https://api.livechatinc.com/v3.4/customer/action/start_chat?license_id=<license_id> \
  -H 'Content-Type: <content-type>' \
  -H 'Authorization: Bearer <customer_access_token>' \
  -d '{}'
```

</CodeSample>

<CodeResponse>

```json
{
  "chat_id": "PJ0MRSHTDG",
  "thread_id": "PGDGHT5G"
}
```

</CodeResponse>

</Code>

</Section>

<Section>

<Text>

### Resume Chat

Restarts an archived chat.

The method updates the requester's `events_seen_up_to` as if they've seen all chat events.

#### Specifics

|                        |                                                                |
| ---------------------- | -------------------------------------------------------------- |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/resume_chat` |
| **RTM API equivalent** | [`resume_chat`](rtm-reference/#resume-chat)                    |
| **Webhook**            | [`incoming_chat`](/management/webhooks/v3.4/#incoming_chat)    |

#### Request

| Parameter                | Required | Data type | Notes                                                                      |
| ------------------------ | -------- | --------- | -------------------------------------------------------------------------- |
| `chat`                   | Yes      | `object`  |                                                                            |
| `chat.id`                | Yes      | `string`  | ID of the chat that will be resumed.                                       |
| `chat.access`            | No       | `object`  | Chat access to set; default: all agents.                                   |
| `chat.properties`        | No       | `object`  | Initial chat properties                                                    |
| `chat.thread`            | No       | `object`  |                                                                            |
| `chat.thread.events`     | No       | `array`   | Initial chat events array                                                  |
| `chat.thread.properties` | No       | `object`  | Initial thread properties                                                  |
| `active`                 | No       | `bool`    | When set to `false`, creates an inactive thread; default: `true`.          |
| `continuous`             | No       | `bool`    | Sets a chat to the continuous mode. When unset, leaves the mode unchanged. |

#### Response

| Field       | Data type  | Notes                                                                                                                                                                   |
| ----------- | ---------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `thread_id` | `string`   |                                                                                                                                                                         |
| `event_ids` | `[]string` | Returned only when the chat was resumed with initial events. Returns only the IDs of user-generated events; server-side generated events are not included in the array. |

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  https://api.livechatinc.com/v3.4/customer/action/resume_chat?license_id=<license_id> \
  -H 'Content-Type: <content-type>' \
  -H 'Authorization: Bearer <customer_access_token>' \
  -d '{
    "chat": {
      "id": "PWLW03ICW7"
      }
    }'
```

</CodeSample>

<CodeResponse>

```json
{
  "thread_id": "Z8AGR5OUW"
}
```

</CodeResponse>

</Code>

</Section>

<Section>

<Text>

### Deactivate Chat

Deactivates a chat by closing the currently open thread. Sending messages to this thread will no longer be possible.

#### Specifics

|                        |                                                                                                                                     |
| ---------------------- | ----------------------------------------------------------------------------------------------------------------------------------- |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/deactivate_chat`                                                                  |
| **RTM API equivalent** | [`deactivate_chat`](rtm-reference/#deactivate-chat)                                                                                 |
| **Webhook**            | [`incoming_event`](/management/webhooks/v3.4/#incoming_event) and [`chat_deactivated`](/management/webhooks/v3.4/#chat_deactivated) |

#### Request

| Parameter | Required | Data type |     |
| --------- | -------- | --------- | --- |
| `id`      | Yes      | `string`  |     |

#### Response

No response payload (`200 OK`).

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  'https://api.livechatinc.com/v3.4/customer/action/deactivate_chat?license_id=<license_id>' \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <customer_access_token>' \
  -d '{
    "id": "PWLW03ICW7"
    }'
```

</CodeSample>

</Code>

</Section>

## Configuration

<Section>

<Text>

### Get Dynamic Configuration

Returns the dynamic configuration of a given group. It provides data to call [**Get Configuration**](#get-configuration) and [**Get Localization**](#get-localization).

#### Specifics

|                        |
| ---------------------- | ---------------------------------------------------------------------------- |
| **HTTP Method**        | **GET**                                                                      |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/get_dynamic_configuration` |
| **RTM API equivalent** | -                                                                            |
| **Webhook**            | -                                                                            |

#### Request

| Parameter      | Required | Data type | Notes                                                                                                                  |
| -------------- | -------- | --------- | ---------------------------------------------------------------------------------------------------------------------- |
| `group_id`     | No       | `number`  | The ID of the group that you want to get a dynamic configuration for. ID of the default group is used if not provided. |
| `url`          | No       | `string`  | The URL that you want to get a dynamic configuration for.                                                              |
| `channel_type` | No       | `string`  | The channel type that you want to get a dynamic configuration for.                                                     |
| `test`         | No       | `bool`    | Treats a dynamic configuration request as a test.                                                                      |

#### Response

| Field                   | Data type | Notes                                                                                                                                |
| ----------------------- | --------- | ------------------------------------------------------------------------------------------------------------------------------------ |
| `group_id`              | `number`  | The ID of the group for which the dynamic configuration is returned.                                                                 |
| `client_limit_exceeded` | `bool`    | Specifies if the limit of customers having a chat was exceeded.                                                                      |
| `domain_allowed`        | `bool`    | Specifies if `url` is configured as a trusted domain (configurable in the Agent Application).                                        |
| `config_version`        | `string`  | The version for which you want to get a configuration. Use it as `version` when calling [**Get Configuration**](#get-configuration). |
| `localization_version`  | `string`  | The version for which you want to get a localization. Use it as `version` when calling [**Get Localization**](#get-localization).    |
| `language`              | `string`  | The language of the group for which the dynamic configuration is returned.                                                           |

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X GET \
  'https://api.livechatinc.com/v3.4/customer/action/get_dynamic_configuration?license_id=<license_id>&group_id=0'
```

</CodeSample>

<CodeResponse>

```json
{
  "group_id": 0,
  "client_limit_exceeded": false,
  "domain_allowed": true,
  "config_version": "84cc87cxza5ee24ed0f84fe3027fjf0c71",
  "localization_version": "79cc87cea5ee24ed0f84fe3027fc0c74",
  "language": "en"
}
```

</CodeResponse>

</Code>

</Section>

<Section>

<Text>

### Get Configuration

Returns the configuration of a given group in a given version. Contains data based on which the Chat Widget can be built.

#### Specifics

|                        |
| ---------------------- | -------------------------------------------------------------------- |
| **HTTP Method**        | **GET**                                                              |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/get_configuration` |
| **RTM API equivalent** | -                                                                    |
| **Webhook**            | -                                                                    |

#### Request

| Parameter  | Required | Data type | Notes                                                                                                                                                              |
| ---------- | -------- | --------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `group_id` | Yes      | `number`  | The ID of the group that you want to get a configuration for.                                                                                                      |
| `version`  | Yes      | `string`  | The version that you want to get a configuration for. Returned from [**Get Dynamic Configuration**](#get-dynamic-configuration) as the `config_version` parameter. |

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X GET \
  'https://api.livechatinc.com/v3.4/customer/action/get_configuration?license_id=<license_id>&group_id=0&version=84cc87cxza5ee24ed0f84fe3027fjf0c71'
```

</CodeSample>

<CodeResponse>

```json
{
  "buttons": [
    {
      "id": "0466ba53cb",
      "type": "image",
      "online_value": "livechat.s3.amazonaws.com/default/buttons/button_online007.png",
      "offline_value": "livechat.s3.amazonaws.com/default/buttons/button_offline007.png"
    },
    {
      "id": "08ca886ba8",
      "type": "image",
      "online_value": "livechat.s3.amazonaws.com/default/buttons/button_online003.png",
      "offline_value": "livechat.s3.amazonaws.com/default/buttons/button_offline003.png"
    },
    {
      "id": "3344e63cad",
      "type": "text",
      "online_value": "Live chat now",
      "offline_value": "Leave us a message"
    }
  ],
  "ticket_form": {
    // "Form" object
  }, // optional
  "prechat_form": {
    // "Form" object
  }, // optional
  "integrations": {},
  "properties": {
    "group": {},
    "license": {}
  }
}
```

</CodeResponse>

</Code>

</Section>

## Events

<Section>

<Text>

### Send Event

Sends an [Event](/messaging/customer-chat-api/v3.4/data-structures/#events) object. Use this method to send a message by specifying the [Message](/messaging/customer-chat-api/v3.4/data-structures/#message) event type in the request.

The method updates the requester's `events_seen_up_to` as if they've seen all chat events.

#### Specifics

|                        |
| ---------------------- | ------------------------------------------------------------- |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/send_event` |
| **RTM API equivalent** | [`send_event`](rtm-reference/#send-event)                     |
| **Webhook**            | [`incoming_event`](/management/webhooks/v3.4/#incoming_event) |

#### Request

| Parameter               | Required | Data type | Notes                                                                                                                                                             |
| ----------------------- | -------- | --------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `chat_id`               | Yes      | `string`  | Id of the chat that you to send a message to.                                                                                                                     |
| `event`                 | Yes      | `object`  | The event object                                                                                                                                                  |
| `attach_to_last_thread` | No       | `bool`    | The flag is ignored for active chats. For inactive chats: `true` â€“ the event will be added to the last thread; `false` â€“ the request will fail. Default: `false`. |

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  'https://api.livechatinc.com/v3.4/customer/action/send_event?license_id=<license_id>' \
  -H 'Content-Type: application/json' \
  -d '{
    "chat_id": "PWLW03ICW7",
    "event": {
      "type": "message",
      "text": "hello world",
      "recipients": "all"
    }
  }'
```

</CodeSample>

<CodeResponse>

```json
{
  "event_id": "K600PKZON8"
}
```

</CodeResponse>

</Code>

</Section>

<!-- > **`send_event`** sample **request** with optional params

```shell
curl -X POST \
  'https://api.livechatinc.com/v3.4/customer/action/send_event?license_id=<license_id>' \
  -H 'Content-Type: application/json' \
  -d '{
    "chat_id": "PWLW03ICW7",
    "event": {
      "type": "message",
      "text": "hello world",
      "recipients": "all"
      }
    }'
``` -->

<Section>
<Text>

### Upload File

Uploads a file to the server as a temporary file. It returns a URL that expires after 24 hours unless the URL is used in [`send_event`](#send-event).

#### Specifics

|                        |                                                                      |
| ---------------------- | -------------------------------------------------------------------- |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/upload_file`       |
| **RTM API equivalent** | -                                                                    |
| **Webhook**            | [`incoming_event`](/management/webhooks/v3.4/#incoming_event) **\*** |

**\*)**
`incoming_event` returns a URL that never expires.

#### Request

| Parameter | Required | Data type | Notes              |
| --------- | -------- | --------- | ------------------ |
| `file`    | Yes      | `binary`  | Maximum size: 10MB |

</Text>
<Code>
<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  https://api.livechatinc.com/v3.4/customer/action/upload_file?license_id=<license_id> \
  -H 'Authorization: Bearer <customer_access_token>' \
  -H 'Content-Type: multipart/form-data; boundary=--------------------------210197025774705439685896' \
  -H 'content-type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW' \
  -F file=@/Users/MyAccount/Desktop/image.png
```

</CodeSample>
<CodeResponse>

```json
{
  "url": "https://cdn.livechat-files.com/api/file/lc/att/8948324/45a3581b59a7295145c3825c86ec7ab3/image.png"
}
```

</CodeResponse>
</Code>
</Section>

<Section>

<Text>

### Send Rich Message Postback

#### Specifics

|                        |                                                                                                     |
| ---------------------- | --------------------------------------------------------------------------------------------------- |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/send_rich_message_postback`                       |
| **RTM API equivalent** | [`send_rich_message_postback`](rtm-reference/#send-rich-message-postback)                           |
| **Webhook**            | [`incoming_rich_message_postback`](/management/webhooks/v3.4/#incoming_rich_message_postback)**\*** |

**\*)** `incoming_rich_message_postback` will be sent only for active threads.

#### Request

| Parameter          | Required | Data type | Notes                               |
| ------------------ | -------- | --------- | ----------------------------------- |
| `chat_id`          | Yes      | `string`  |                                     |
| `event_id`         | Yes      | `string`  |                                     |
| `postback`         | Yes      | `object`  |                                     |
| `postback.id`      | Yes      | `string`  | Postback name of the button         |
| `postback.toggled` | Yes      | `bool`    | Postback toggled; `true` or `false` |
| `thread_id`        | Yes      | `string`  |                                     |

#### Response

No response payload (`200 OK`).

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  'https://api.livechatinc.com/v3.4/customer/action/send_rich_message_postback?license_id=<license_id>' \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <customer_access_token>' \
  -d '{
    "chat_id": "PJ0MRSHTDG",
    "thread_id": "K600PKZON8",
    "event_id": "a0c22fdd-fb71-40b5-bfc6-a8a0bc3117f7",
    "postback": {
      "id": "Method URL_yes",
      "toggled": true
      }
    }'
```

</CodeSample>

</Code>

</Section>

<Section>

<Text>

### Send Sneak Peek

Sends a sneak peek to a chat.

#### Specifics

|                        |                                                                    |
| ---------------------- | ------------------------------------------------------------------ |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/send_sneak_peek` |
| **RTM API equivalent** | [`send_sneak_peek`](rtm-reference/#send-sneak-peek)                |
| **Webhook**            | -                                                                  |

#### Request

| Parameter         | Required | Data type | Notes                                   |
| ----------------- | -------- | --------- | --------------------------------------- |
| `chat_id`         | Yes      | `string`  | Id of the chat to send a sneak peek to. |
| `sneak_peek_text` | Yes      | `string`  | Sneak peek text                         |

#### Response

No response payload (`200 OK`).

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  'https://api.livechatinc.com/v3.4/customer/action/send_sneak_peek?license_id=<license_id>' \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <customer_access_token>' \
  -d '{
    "chat_id": "PJ0MRSHTDG",
    "sneak_peek_text": "hello world"
    }'
```

</CodeSample>

</Code>

</Section>

## Localization

<Section>

<Text>

### Get Localization

Returns the <a href="https://en.wikipedia.org/wiki/Language_localisation" rel="noopener nofollow" target="_blank">localization</a> of a given language and group in a given version. Contains translated phrases for the Chat Widget.

#### Specifics

|                        |
| ---------------------- | ------------------------------------------------------------------- |
| **HTTP Method**        | **GET**                                                             |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/get_localization` |
| **RTM API equivalent** | -                                                                   |
| **Webhook**            | -                                                                   |

#### Request

| Parameter  | Required | Data type | Notes                                                                                                                                                                   |
| ---------- | -------- | --------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `group_id` | Yes      | `number`  | The ID of the group that you want to get a localization for.                                                                                                            |
| `language` | Yes      | `string`  | The language that you want to get a localization for.                                                                                                                   |
| `version`  | Yes      | `string`  | The version that you want to get a localization for. Returned from [**Get Dynamic Configuration**](#get-dynamic-configuration) as the `localization_version` parameter. |

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X GET \
  'https://api.livechatinc.com/v3.4/customer/action/get_localization?license_id=<license_id>&group_id=0&language=en&version=79cc87cea5ee24ed0f84fe3027fc0c74'
```

</CodeSample>

<CodeResponse>

```json
{
  "Agents_currently_not_available": "Our agents are not available at the moment.",
  "Agents_not_available": "Our agents are not available at the moment.",
  "Agents_not_available_continuous": "Our agents are not available right now, but you can still send messages. We'll notify you at your email address when you get a reply.",
  "Assistly_ticket_created": "A support ticket has been created for your case.",
  "Assistly_ticket_notification": "You will be emailed at %email% when it's resolved.",
  ...
}
```

</CodeResponse>

</Code>

</Section>

## Properties

<Section>

<Text>

### Update Chat Properties

#### Specifics

|                        |                                                                                 |
| ---------------------- | ------------------------------------------------------------------------------- |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/update_chat_properties`       |
| **RTM API equivalent** | [`update_chat_properties`](rtm-reference/#update-chat-properties)               |
| **Webhook**            | [`chat_properties_updated`](/management/webhooks/v3.4/#chat_properties_updated) |

#### Request

| Parameter    | Required | Data type | Notes                                                                                                                                                                        |
| ------------ | -------- | --------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `id`         | Yes      | `string`  | Id of the chat you to set a property for.                                                                                                                                    |
| `properties` | Yes      | `object`  | Chat properties to set. You should stick to the [general properties format](/management/configuration-api/#properties) and include _namespace_, _property name_ and _value_. |

#### Response

No response payload (`200 OK`).

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  'https://api.livechatinc.com/v3.4/customer/action/update_chat_properties?license_id=<license_id>' \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <customer_access_token>' \
  -d '{
    "id": "Q1GZ3FNAT9",
    "properties": {
      "0805e283233042b37f460ed8fbf22160": {
        "string_property": "Chat property value updated by Customer"
        }
      }
    }'
```

</CodeSample>

</Code>

</Section>

<Section>

<Text>

### Delete Chat Properties

#### Specifics

|                        |                                                                                 |
| ---------------------- | ------------------------------------------------------------------------------- |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/delete_chat_properties`       |
| **RTM API equivalent** | [`delete_chat_properties`](rtm-reference/#delete-chat-properties)               |
| **Webhook**            | [`chat_properties_deleted`](/management/webhooks/v3.4/#chat_properties_deleted) |

#### Request

| Parameter    | Required | Data type | Notes                                            |
| ------------ | -------- | --------- | ------------------------------------------------ |
| `id`         | Yes      | `string`  | Id of the chat you want to delete properties of. |
| `properties` | Yes      | `object`  | Chat properties to delete.                       |

#### Response

No response payload (`200 OK`).

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  'https://api.livechatinc.com/v3.4/customer/action/delete_chat_properties?license_id=<license_id>' \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <customer_access_token>' \
  -d '{
    "id": "Q1GZ3FNAT9",
    "properties": {
      "0805e283233042b37f460ed8fbf22160": [
        "string_property"
        ]
      }
    }'
```

</CodeSample>

</Code>

</Section>

<Section>

<Text>

### Update Thread Properties

#### Specifics

|                        |                                                                                     |
| ---------------------- | ----------------------------------------------------------------------------------- |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/update_thread_properties`         |
| **RTM API equivalent** | [`update_thread_properties`](rtm-reference/#update-thread-properties)               |
| **Webhook**            | [`thread_properties_updated`](/management/webhooks/v3.4/#thread_properties_updated) |

#### Request

| Parameter    | Required | Data type | Notes                                            |
| ------------ | -------- | --------- | ------------------------------------------------ |
| `chat_id`    | Yes      | `string`  | Id of the chat you want to set properties for.   |
| `thread_id`  | Yes      | `string`  | Id of the thread you want to set properties for. |
| `properties` | Yes      | `object`  | Chat properties to set.                          |

#### Response

No response payload (`200 OK`).

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  'https://api.livechatinc.com/v3.4/customer/action/update_thread_properties?license_id=<license_id>' \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <customer_access_token>' \
  -d '{
    "chat_id": "Q1GZ3FNAT9",
    "thread_id": "Q1GZ3FNAU9",
    "properties": {
      "0805e283233042b37f460ed8fbf22160": {
        "string_property": "Thread property value updated by Customer"
        }
      }
    }'
```

</CodeSample>

</Code>

</Section>

<Section>

<Text>

### Delete Thread Properties

#### Specifics

|                        |                                                                                     |
| ---------------------- | ----------------------------------------------------------------------------------- |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/delete_thread_properties`         |
| **RTM API equivalent** | [`delete_thread_properties`](rtm-reference/#delete-thread-properties)               |
| **Webhook**            | [`thread_properties_deleted`](/management/webhooks/v3.4/#thread_properties_deleted) |

#### Request

| Parameter    | Required | Data type | Notes                                                  |
| ------------ | -------- | --------- | ------------------------------------------------------ |
| `chat_id`    | Yes      | `string`  | Id of the chat you want to delete the properties of.   |
| `thread_id`  | Yes      | `string`  | Id of the thread you want to delete the properties of. |
| `properties` | Yes      | `object`  | Thread properties to delete.                           |

#### Response

No response payload (`200 OK`).

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  'https://api.livechatinc.com/v3.4/customer/action/delete_thread_properties?license_id=<license_id>' \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <customer_access_token>' \
  -d '{
    "chat_id": "Q1GZ3FNAT9",
    "thread_id": "Q1GZ3FNAU9",
    "properties": {
      "0805e283233042b37f460ed8fbf22160": [
        "string_property"
      ]
    }
  }'
```

</CodeSample>

</Code>

</Section>

<Section>

<Text>

### Update Event Properties

#### Specifics

|                        |                                                                                   |
| ---------------------- | --------------------------------------------------------------------------------- |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/update_event_properties`        |
| **RTM API equivalent** | [`update_event_properties`](rtm-reference/#update-event-properties)               |
| **Webhook**            | [`event_properties_updated`](/management/webhooks/v3.4/#event_properties_updated) |

#### Request

| Parameter    | Required | Data type | Notes                                                                                                                                                                        |
| ------------ | -------- | --------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `chat_id`    | Yes      | `string`  | Id of the chat you want to set properties for.                                                                                                                               |
| `thread_id`  | Yes      | `string`  | Id of the thread you want to set properties for.                                                                                                                             |
| `event_id`   | Yes      | `string`  | Id of the event you want to set properties for.                                                                                                                              |
| `properties` | Yes      | `object`  | Chat properties to set. You should stick to the [general properties format](/management/configuration-api/#properties) and include _namespace_, _property name_ and _value_. |

#### Response

No response payload (`200 OK`).

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  'https://api.livechatinc.com/v3.4/customer/action/update_event_properties?license_id=<license_id>' \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <customer_access_token>' \
  -d '{
    "chat_id": "Q1GZ3FNAT9",
    "thread_id": "Q1GZ3FNAU9",
    "event_id": "Q1GZ3FNAU9_1",
    "properties": {
      "0805e283233042b37f460ed8fbf22160": {
      "string_property": "Event property value updated by Customer"
        }
      }
    }'
```

</CodeSample>

</Code>

</Section>

<Section>

<Text>

### Delete Event Properties

#### Specifics

|                        |                                                                                   |
| ---------------------- | --------------------------------------------------------------------------------- |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/delete_event_properties`        |
| **RTM API equivalent** | [`delete_event_properties`](rtm-reference/#delete-event-properties)               |
| **Webhook**            | [`event_properties_deleted`](/management/webhooks/v3.4/#event_properties_deleted) |

#### Request

| Parameter    | Required | Data type | Notes                                                                                                                                                                            |
| ------------ | -------- | --------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `chat_id`    | Yes      | `string`  | Id of the chat you want to delete the properties of.                                                                                                                             |
| `thread_id`  | Yes      | `string`  | Id of the thread you want to delete the properties of.                                                                                                                           |
| `event_id`   | Yes      | `string`  | Id of the event you want to delete the properties of.                                                                                                                            |
| `properties` | Yes      | `object`  | Event properties to delete. You should stick to the [general properties format](/management/configuration-api/#properties) and include _namespace_, _property name_ and _value_. |

#### Response

No response payload (`200 OK`).

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  'https://api.livechatinc.com/v3.4/customer/action/delete_event_properties?license_id=<license_id>' \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <customer_access_token>' \
  -d '{
    "chat_id": "Q1GZ3FNAT9",
    "thread_id": "Q1GZ3FNAU9",
    "event_id": "Q1GZ3FNAU9_1",
    "properties": {
      "0805e283233042b37f460ed8fbf22160": [
        "string_property"
        ]
      }
    }'
```

</CodeSample>

</Code>

</Section>

<Section>

<Text>

### List License Properties

Returns the properties of a given license. It only returns the properties a Customer has access to.

#### Specifics

|                        |                                                                            |
| ---------------------- | -------------------------------------------------------------------------- |
| **HTTP Method**        | **GET**                                                                    |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/list_license_properties` |
| **RTM API equivalent** | -                                                                          |
| **Webhook**            | -                                                                          |

#### Request

| Query string parameter | Required | Data type | Notes                          |
| ---------------------- | -------- | --------- | ------------------------------ |
| `namespace`            | No       | `string`  | Property namespace to retrieve |
| `name`                 | No       | `string`  | Property name                  |

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X GET \
  'https://api.livechatinc.com/v3.4/customer/action/list_license_properties?license_id=123&namespace=0805e283233042b37f460ed8fbf22160&name=string_property' \
  -H 'Content-Type: application/json'
```

</CodeSample>

<CodeResponse>

```json
{
  "0805e283233042b37f460ed8fbf22160": {
    "string_property": "string value"
  }
}
```

</CodeResponse>

</Code>

</Section>

<Section>

<Text>

### List Group Properties

Returns the properties of a given group. It only returns the properties a Customer has access to.

#### Specifics

|                        |                                                                          |
| ---------------------- | ------------------------------------------------------------------------ |
| **HTTP Method**        | **GET**                                                                  |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/list_group_properties` |
| **RTM API equivalent** | -                                                                        |
| **Webhook**            | -                                                                        |

#### Request

| Query string parameter | Required | Data type | Notes                                                 |
| ---------------------- | -------- | --------- | ----------------------------------------------------- |
| `id`                   | Yes      | `number`  | Id of the group you want to return the properties of. |
| `namespace`            | No       | `string`  | Property namespace to retrieve                        |
| `name`                 | No       | `string`  | Property name                                         |

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X GET \
  'https://api.livechatinc.com/v3.4/customer/action/list_group_properties?license_id=11069052&id=1&namespace=0805e283233042b37f460ed8fbf22160&name=string_property' \
  -H 'Content-Type: application/json'
```

</CodeSample>

<CodeResponse>

```json
{
  "0805e283233042b37f460ed8fbf22160": {
    "string_property": "string value"
  }
}
```

</CodeResponse>

</Code>

</Section>

## Customers

<Section>

<Text>

### Update Customer

#### Specifics

|                        |                                                                                                                 |
| ---------------------- | --------------------------------------------------------------------------------------------------------------- |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/update_customer`                                              |
| **RTM API equivalent** | [`update_customer`](rtm-reference/#update-customer)                                                             |
| **Webhook**            | [`customer_session_fields_updated`](/management/configuration-api/v3.4/#customer_session_fields_updated) **\*** |

**\***
The webhook will be sent only if the customer has active chats.

#### Request

| Parameter        | Required | Data type  | Notes                                                                              |
| ---------------- | -------- | ---------- | ---------------------------------------------------------------------------------- |
| `name`           | No       | `string`   |                                                                                    |
| `email`          | No       | `string`   |                                                                                    |
| `avatar`         | No       | `string`   | The URL of the Customer's avatar                                                   |
| `session_fields` | No       | `[]object` | An array of custom object-enclosed `key:value` pairs. Respects the order of items. |

At least one optional parameter needs to be included in the request.

#### Response

No response payload (`200 OK`).

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
'https://api.livechatinc.com/v3.4/customer/action/update_customer?license_id=<license_id>' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer <customer_access_token>' \
-d '{
    "name": "Thomas Anderson",
    "email": "t.anderson@example.com",
    "avatar": "example.com/avatars/1.png",
    "session_fields": [{
    "custom_key": "custom_value"
    }, {
    "another_custom_key": "another_custom_value"
    }]
  }'
```

</CodeSample>

</Code>

</Section>

<Section>

<Text>

### Set Customer Session Fields

#### Specifics

|                        |                                                                                                                 |
| ---------------------- | --------------------------------------------------------------------------------------------------------------- |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/set_customer_session_fields`                                  |
| **RTM API equivalent** | [`set_customer_session_fields`](rtm-reference/#set-customer-session-fields)                                     |
| **Webhook**            | [`customer_session_fields_updated`](/management/configuration-api/v3.4/#customer_session_fields_updated) **\*** |

**\***
The webhook will be sent only if the customer has active chats.

#### Request

| Parameter        | Required | Data type  | Notes                                                                                            |
| ---------------- | -------- | ---------- | ------------------------------------------------------------------------------------------------ |
| `session_fields` | Yes      | `[]object` | An array of custom object-enclosed `key:value` pairs. Respects the order of items. Max keys: 100 |

Users Agent and referrer are updated by default using the browserâ€™s headers.

#### Response

No response payload (`200 OK`).

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
'https://api.livechatinc.com/v3.4/customer/action/set_customer_session_fields?license_id=<license_id>' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer <customer_access_token>' \
-d '{
    "session_fields": [{
    "custom_key": "custom_value"
    }, {
    "another_custom_key": "another_custom_value"
    }]
  }'
```

</CodeSample>

</Code>

</Section>

<Section>

<Text>

### Get Customer

Returns the info about the Customer requesting it.

#### Specifics

|                        |                                                                 |
| ---------------------- | --------------------------------------------------------------- |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/get_customer` |
| **RTM API equivalent** | [`get_customer`](rtm-reference/#get-customer)                   |
| **Webhook**            | -                                                               |

#### Response

|                  |                                                                                                                 |
| ---------------- | --------------------------------------------------------------------------------------------------------------- |
| `name`           | [Customer's](/messaging/customer-chat-api/v3.4/data-structures/#customer) name. Returned only if set.           |
| `email`          | [Customer's](/messaging/customer-chat-api/v3.4/data-structures/#customer) email. Returned only if set.          |
| `avatar`         | [Customer's](/messaging/customer-chat-api/v3.4/data-structures/#customer) avatar. Returned only if set.         |
| `session_fields` | An array of custom object-enclosed `key:value` pairs. Returned only if set. Available for the session duration. |

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
'https://api.livechatinc.com/v3.4/customer/action/get_customer?license_id=<license_id>' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer <customer_access_token>' \
-d '{}'
```

</CodeSample>

<CodeResponse>

```json
{
  "id": "b7eff798-f8df-4364-8059-649c35c9ed0c",
  "type": "customer",
  "name": "Thomas Anderson", // optional
  "email": "t.anderson@example.com", // optional
  "avatar": "https://example.com/avatars/1.jpg", // optional
  "session_fields": [{ // optional
  "custom_key": "custom_value"
  }, {
  "another_custom_key": "another_custom_value"
  }]
}
```

</CodeResponse>

</Code>

</Section>

## Status

<Section>

<Text>

### List Group Statuses

#### Specifics

|                        |                                                                        |
| ---------------------- | ---------------------------------------------------------------------- |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/list_group_statuses` |
| **RTM API equivalent** | [`list_group_statuses`](rtm-reference/#list-group-statuses)            |
| **Webhook**            | -                                                                      |

#### Request

| Parameter   | Required | Data type | Notes                                                      |
| ----------- | -------- | --------- | ---------------------------------------------------------- |
| `all`       | No       | `bool`    | If set to `true`, you will get statuses of all the groups. |
| `group_ids` | No       | `array`   | A table of groups' IDs                                     |

One of the optional parameters needs to be included in the request.

#### Response

No response payload (`200 OK`).

#### Response

|                   |                                                                                                  |     |
| ----------------- | ------------------------------------------------------------------------------------------------ | --- |
| `Group Not Found` | If you send `group_id` of a group that doesn't exists, the id won't be included in the resposne. |     |

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  'https://api.livechatinc.com/v3.4/customer/action/list_group_statuses?license_id=<license_id>' \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <customer_access_token>' \
  -d '{
    "all": true
    }'
```

</CodeSample>

<CodeResponse>

```json
{
  "groups_status": {
  //1,2,3 are group ids, online/offline/online_for_queue are statuses of the groups

  1: "online",
  2: "offline",
  3: "online_for_queue"
  }
}
```

</CodeResponse>

</Code>

</Section>

## Other

<Section>

<Text>

### Check Goals

Customer can use this method to trigger checking if [goals](https://www.livechat.com/help/goals-set-up-and-use/) were achieved. Then, Agents receive the information. You should call this method to provide goals parameters for the server when the customers limit is reached. Works only for offline Customers.

#### Specifics

|                        |                                                                |
| ---------------------- | -------------------------------------------------------------- |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/check_goals` |
| **RTM API equivalent** | -                                                              |
| **Webhook**            | -                                                              |

#### Request

| Parameter        | Required | Data type  | Notes                                                |
| ---------------- | -------- | ---------- | ---------------------------------------------------- |
| `session_fields` | Yes      | `[]object` | An array of custom object-enclosed `key:value` pairs |
| `group_id`       | Yes      | `number`   |                                                      |
| `page_url`       | Yes      | `string`   |                                                      |

#### Response

No response payload (`200 OK`).

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
'https://api.livechatinc.com/v3.4/customer/action/check_goals?license_id=<license_id>' \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer <customer_access_token>' \
-d '{
    "page_url": "https://mypage.com",
    "session_fields": [{
    "custom_key": "custom_value"
    }, {
    "another_custom_key": "another_custom_value"
    }],
    "group_id": 0
  }'
```

</CodeSample>

</Code>

</Section>

<Section>

<Text>

### Get Form

Returns an empty ticket form of a <a href="https://www.livechat.com/help/chat-surveys/" target="_blank">prechat or postchat survey</a>.

#### Specifics

|                        |                                                             |
| ---------------------- | ----------------------------------------------------------- |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/get_form` |
| **RTM API equivalent** | [`get_form`](rtm-reference/#get-form)                       |
| **Webhook**            | -                                                           |

#### Request

| Parameter  | Required | Data type | Notes                                               |
| ---------- | -------- | --------- | --------------------------------------------------- |
| `group_id` | Yes      | `number`  | Id of the group from which you want the form.       |
| `type`     | Yes      | `string`  | Form type; possible values: `prechat` or `postchat` |

#### Response

|           |                                                                                                                            |
| --------- | -------------------------------------------------------------------------------------------------------------------------- |
| `enabled` | If `enabled: false`, the `form` object is not returned. Prechat/postchat survey can disabled in the LiveChat Agent App UI. |
| `form`    | The [Form](/messaging/customer-chat-api/v3.4/data-structures/#form) data structure.                                        |

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  'https://api.livechatinc.com/v3.4/customer/action/get_form?license_id=<license_id>' \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <customer_access_token>' \
  -d '{
    "group_id": 0,
    "type": "prechat"
    }'
```

</CodeSample>

<CodeResponse>

```json
{
  "form": {
    // "Form" object
  },
  "enabled": true
}
```

</CodeResponse>

</Code>

</Section>

<Section>

<Text>

### Get Predicted Agent

Gets the predicted Agent - the one the Customer will chat with when the chat starts. To use this method, the Customer needs to be logged in, which can be done via the [`login`](rtm-reference/#login) method.

#### Specifics

|                        |                                                                        |
| ---------------------- | ---------------------------------------------------------------------- |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/get_predicted_agent` |
| **RTM API equivalent** | [`get_predicted_agent`](rtm-reference/#get-predicted-agent)            |
| **Webhook**            | -                                                                      |

#### Response

| Field   | Data type | Notes                               |
| ------- | --------- | ----------------------------------- |
| `queue` | `bool`    | If `true`, the chat will be queued. |

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  'https://api.livechatinc.com/v3.4/customer/action/get_predicted_agent?license_id=<license_id>' \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <customer_access_token>' \
  -d '{}'
```

</CodeSample>

<CodeResponse>

```json
{
  "agent": {
    "id": "b5657aff34dd32e198160d54666df9d8",
    "name": "Agent Smith",
    "avatar": "https://example.avatar/example.com",
    "is_bot": false,
    "job_title": "support hero",
    "type": "agent"
  },
  "queue": false
}
```

</CodeResponse>

</Code>

</Section>

<Section>

<Text>

### Get URL Info

It returns the info on a given URL.

#### Specifics

|                        |                                                                 |
| ---------------------- | --------------------------------------------------------------- |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/get_url_info` |
| **RTM API equivalent** | [`get_url_info`](rtm-reference/#get-url-info)                   |
| **Webhook**            | -                                                               |

#### Request

| Parameter | Required | Data type | Notes             |
| --------- | -------- | --------- | ----------------- |
| `url`     | Yes      | `string`  | Valid website URL |

#### Response

| Field                | Data type | Notes                                                  |
| -------------------- | --------- | ------------------------------------------------------ |
| `image_url`          | `string`  | URL of the minified image hosted on the LiveChat's CDN |
| `image_original_url` | `string`  | URL of the original image                              |

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  'https://api.livechatinc.com/v3.4/customer/action/get_url_info?license_id=<license_id>' \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <customer_access_token>' \
  -d '{
    "url": "https://livechatinc.com"
    }'
```

</CodeSample>

<CodeResponse>

```json
{
  "title": "LiveChat | Live Chat Software and Help Desk Software",
  "description": "LiveChat - premium live chat software and help desk software for business. Over 24 000 companies from 150 countries use LiveChat. Try now, chat for free!",
  "image_url": "https://example.com/image.png",
  "image_original_url": "https://example-original-url.com/image.png",
  "image_width": 200,
  "image_height": 200,
  "url": "https://livechatinc.com"
}
```

</CodeResponse>

</Code>

</Section>

<Section>

<Text>

### Mark Events As Seen

#### Specifics

|                        |                                                                             |
| ---------------------- | --------------------------------------------------------------------------- |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/mark_events_as_seen`      |
| **RTM API equivalent** | [`mark_events_as_seen`](rtm-reference/#mark-events-as-seen)                 |
| **Webhook**            | [`events_marked_as_seen`](/management/webhooks/v3.4/#events_marked_as_seen) |

#### Request

| Parameter    | Required | Data type | Notes                     |
| ------------ | -------- | --------- | ------------------------- |
| `chat_id`    | Yes      | `string`  |                           |
| `seen_up_to` | Yes      | `string`  | RFC 3339 date-time format |

#### Response

No response payload (`200 OK`).

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  'https://api.livechatinc.com/v3.4/customer/action/mark_events_as_seen?license_id=<license_id>' \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <customer_access_token>' \
  -d '{
    "chat_id": "PJ0MRSHTDG",
    "seen_up_to": "2017-10-12T15:19:21.010200Z"
    }'
```

</CodeSample>

</Code>

</Section>

<Section>

<Text>

### Accept Greeting

Marks an incoming greeting as seen.

**How it's implemented in LiveChat:**

The Chat Widget uses this method to inform that a Customer has seen a greeting. Based on that, the Reports section displays the greetings
that were actually seen by Customers, not all the sent greetings. If a Customer started a chat from a greeting, but the **Accept Method** wasn't executed,
the greeting is still counted as seen in Reports.

#### Specifics

|                        |                                                                                       |
| ---------------------- | ------------------------------------------------------------------------------------- |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/accept_greeting`                    |
| **RTM API equivalent** | [`accept_greeting`](/messaging/customer-chat-api/v3.4/rtm-reference/#accept-greeting) |
| **Webhook**            | -                                                                                     |

#### Request

| Parameter     | Required | Data type | Notes                                                                                                                                                 |
| ------------- | -------- | --------- | ----------------------------------------------------------------------------------------------------------------------------------------------------- |
| `greeting_id` | Yes      | `number`  | ID of the greeting configured within the license to accept.                                                                                           |
| `unique_id`   | Yes      | `string`  | ID of the greeting to accept. You can get it from the [`incoming_greeting`](/messaging/customer-chat-api/v3.4/rtm-reference/#incoming_greeting) push. |

#### Response

No response payload (`200 OK`).

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  'https://api.livechatinc.com/v3.4/customer/action/accept_greeting?license_id=<license_id>' \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <customer_access_token>' \
  -d '{
    "greeting_id": 7,
    "unique_id": "Q10X0W041P"
    }'
```

</CodeSample>

</Code>

</Section>

<Section>

<Text>

### Cancel Greeting

Cancels a greeting (an invitation to the chat). For example, Customers could cancel greetings by minimalizing the chat widget with a greeting.

#### Specifics

|                        |                                                                                       |
| ---------------------- | ------------------------------------------------------------------------------------- |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/cancel_greeting`                    |
| **RTM API equivalent** | [`cancel_greeting`](/messaging/customer-chat-api/v3.4/rtm-reference/#cancel-greeting) |
| **Webhook**            | -                                                                                     |

#### Request

| Parameter   | Required | Data type | Notes                                                                                                                                                 |
| ----------- | -------- | --------- | ----------------------------------------------------------------------------------------------------------------------------------------------------- |
| `unique_id` | Yes      | `string`  | ID of the greeting to cancel. You can get it from the [`incoming_greeting`](/messaging/customer-chat-api/v3.4/rtm-reference/#incoming_greeting) push. |

#### Response

No response payload (`200 OK`).

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  'https://api.livechatinc.com/v3.4/customer/action/cancel_greeting?license_id=<license_id>' \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <customer_access_token>' \
  -d '{
    "unique_id": "Q10X0W041P"
    }'
```

</CodeSample>

</Code>

</Section>

<Section>

<Text>

### Request Email Verification

Requests the verification of the customer's email address by sending them a verification email with the identity confirmation link.

Once the customer verifies their identity, we'll send a POST callback to the URL you provided in the `callback_uri` request parameter. The callback will contain the verified email in the payload.

The identity verification mechanism has the following constraints:
- We'll store multiple verification requests until a customer confirms their identity. Once the identity is confirmed, we'll send a callback only for the 10 most recent verification requests, not for all stored requests.
- Seven days after the last verification request, all callbacks are voided and, as a result, won't be sent.
- If a customer has already verified their email, the callback will be sent immediately, without prompting the customer to verify it again.

#### Specifics

|                        |                                                                               |
| ---------------------- | ----------------------------------------------------------------------------- |
| **Method URL**         | `https://api.livechatinc.com/v3.4/customer/action/request_email_verification` |
| **RTM API equivalent** | -                                                                             |
| **Webhook**            | -                                                                             |

#### Request

| Parameter      | Required | Data type | Notes                                                                                                           |
| -------------- | -------- | --------- | --------------------------------------------------------------------------------------------------------------- |
| `callback_uri` | Yes      | `string`  | URI to be called after the customer confirms their email address. Should return 200 code. There are no retries. |

#### Response

No response payload (`200 OK`).

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  'https://api.livechatinc.com/v3.4/customer/action/request_email_verification?license_id=<license_id>' \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <customer_access_token>' \
  -d '{
    "callback_uri": "http://example.com"
    }'
```

</CodeSample>

</Code>

</Section>

# Webhooks

Here's what you need to know about **webhooks**:

- Webhooks notify you when specific events are triggered.
- They can be generated by both Web and RTM API actions.
- When using RTM API, you can be also notified about events with [pushes](/messaging/customer-chat-api/rtm-pushes).
- Webhooks and pushes have similar payloads.
- There's a limit of three weebhoks for every action a Client ID can register.

<SectionLink to={"/management/configuration-api/v3.4/#webhooks"}>See webhook methods</SectionLink>
<SectionLink to={"/management/webhooks/v3.4/"}>See webhook payloads</SectionLink>

# Errors

<CodeResponse title={'General error format'}>

```json
{
  "error": {
    "type": "misdirected_request",
    "message": "Wrong region",
    "data": {
      // optional
      "region": "dal"
    }
  }
}
```

</CodeResponse>

## Possible errors

<Errors errors="authentication,authorization,chat_anonymized,chat_inactive,customer_banned,entity_too_large,greeting_not_found,group_not_found,group_offline,group_unavailable,groups_offline,internal,license_expired,license_not_found,limit_reached,misdirected_request,request_timeout,service_unavailable,too_many_requests,unsupported_version,validation,wrong_product_version"/>

# Contact us

If you found a bug or a typo, you can let us know directly on GitHub.
In case of any questions or feedback, don't hesitate to contact us at [developers@livechat.com](mailto:developers@livechat.com). We'll be happy to hear from you!
