---
weight: 10
category: "management"
subcategory: "configuration-api"
title: "Configuration API"
tagline: "Set up webhooks, create Bot Agents or properties."
desc: "Reach out for the Configuration API to set up webhooks, create Bot Agents or properties."
apiVersion: "3.2"
---

# Introduction

Configuration API is a service for storing configuration of license. You can set up here different types of features such as properties or webhooks.

## Versioning

This document describes the **Configuration API v3.2**.

## Authentication

Authentication for Configuration API is handled by access tokens. Find out how to get an access token from [Agent authorization flows](/getting-started/authorization/#agent-authorization-flows). If a method requires particular authorization scopes, you’ll find them included in the method description. Each request should contain the `Authorization: Bearer <your_access_token>` header.


## Data centers

LiveChat system operates in two data centers: `dal` (USA) and `fra` (Europe). The default data center is `dal`.

All the LiveChat OAuth2.0 access tokens have a prefix: `dal-` or `fra-`. This prefix indicates the data center they belong to. If you need to specify the data center while making an API call, simply add the `X-Region: <token_prefix>` optional header.

Summing up, if the user token starts with `fra-`, you should add the `X-Region: fra header`. If the token starts with `dal-`, you don’t have to specify the header.

## Propagation delay

All configurations set by this API will have action in system after max 2 minutes. This delay will be removed in the future.

# Bot Agents

Bot Agents enables writing integrations using the **Agent Chat API** - both [RTM](/messaging/agent-chat-api/rtm-reference/) and [Web](/messaging/agent-chat-api/) - to communicate in chats as regular Agents.
A Bot Agent shares the SSO access token with the Agent who created the Bot. Each Bot Agent is a resource owned by an application in Developers Platform, identified by its own `client_id`. 

Unlike Agents, Bot Agents don't have passwords or emails - you cannot log in as a Bot. 

## Methods


| HTTP method  | The Bot Agents API endpoint |
|-------|--------|
| `POST`|`https://api.livechatinc.com/v3.2/configuration/action/<action>`   |


| Required header   |      Value      |   |
|----------|:-------------:|------:|
| `Content-Type`	 |  `application/json`  |  |

<Section>

<Text>

### Create Bot Agent 


#### Specifics

|  |  |
|-------|--------|
| Method URL   | `https://api.livechatinc.com/v3.2/configuration/action/create_bot_agent`  |
| Required scopes| `agents-bot--my:rw`  |

#### Request

| Request object                       | Type       | Required | Notes                                                                |
| ------------------------------------ | ---------- | -------- | -------------------------------------------------------------------- |
| `name`                               | `string`   | Yes      | Display name                                                         |
| `status` __*__                       | `string`   | Yes      | Agent status                                                         |
| `avatar`                             | `string`   | No       | Avatar URL                                                           |
| `max_chats_count`                    | `int`      | No       | Max. number of incoming chats that can be routed to an Agent; default: 6. |
| `groups`                             | `object[]` | No       | Groups an Agent belongs to.                                          |
| `groups[].id`                        | `uint`     | Yes      | Group ID; required only when `group`'s included.                     |
| `groups[].priority` __**__           | `string`   | Yes      | Agent's priority in a group; required only when `group`'s included.    |
| `webhooks`                           | `object`   | No       | Webhooks sent to the Agent; for more info on possible values and payload, see [Webhooks](#webhooks).     |
| `webhooks.url`                       | `string`   | Yes      | Destination URL for webhooks; required only when `webhooks` is included.       |
| `webhooks.secret_key`                | `string`   | Yes      | Secret sent in webhooks to verify webhook's source; required only when `webhooks`'s included.  |
| `webhooks.actions`                   | `object[]` | Yes      | [Triggering actions](#triggering-actions); required only when `webhooks`'s included.  |
| `webhooks.actions[].name`            | `string`   | Yes      | The name of the triggering action; required only when `webhooks` is included. |
| `webhooks.actions[].filters`         | `object`   | No       | Filters to check if a webhook should be triggered.                      |
| `webhooks.actions[].additional_data` | `string[]` | No       | Additional data that will arrive with webhooks.                        |


__*__ The table below presents the possible values for the `status` parameter:

| Possible value | Notes           |
| ------------- |:-------------:|
| `accepting chats`  | Agent is logged in. The chat router routes incoming chats to the Agent.     |
| `not accepting chats` | Agent is logged in, but the chat router doesn't route incoming chats to the Agent. |
| `offline` | Agent isn't logged in.    |


__**__ The table below presents the possible values for the `groups[].priority` parameter:

| Possible value | Notes           |
| ------------- |:-------------:|
| `first`  | The highest chat routing priority. Agents with the `first` priority get chats before others from the same group, e.g. Bots can get chats before regular Agents.  |
| `normal` | The medium chat routing priority. Agents with the `normal` priority get chats before those with the `last` priority, when there are no Agents with the `first` priority available with free slots in the group. |
| `last` | The lowest chat routing priority. Agents with the `last` priority get chats when there are no Agents with the `first` or `normal` priority available with free slots in the group.   |

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  https://api.livechatinc.com/v3.2/configuration/action/create_bot_agent \
  -H 'Authorization: Bearer <your_access_token>' \
  -H 'Content-Type: application/json' \
  -d '{
      "name": "Bot Name",
      "status": "accepting chats"
      }'
```

</CodeSample>

<CodeResponse>

```json
{
    "bot_agent_id": "5c9871d5372c824cbf22d860a707a578"
}
```

</CodeResponse>

</Code>

</Section>

<Section>

<Text>

### Remove Bot Agent


#### Specifics

|  |  |
|-------|--------|
| Method URL   | `https://api.livechatinc.com/v3.2/configuration/action/remove_bot_agent`  |
| Required scopes| `agents-bot--my:rw` `agents-bot--all:rw`  |

#### Request

| Parameter          | Required | Type     | Notes        |
| ------------------ | -------- | -------- | ------------ |
| `bot_agent_id`     |  Yes     | `string` | Bot Agent ID |


#### Response

No response payload (`200 OK`).

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  https://api.livechatinc.com/v3.2/configuration/action/remove_bot_agent \
  -H 'Authorization: Bearer <your_access_token>' \
  -H 'Content-Type: application/json' \
  -d '{
      "bot_agent_id": "505591fc9fc2d6e92798bed7d9d8f079"
      }'
```

</CodeSample>

</Code>

</Section>

<Section>

<Text>

### Update Bot Agent


#### Specifics

|  |  |
|-------|--------|
| Method URL   | `https://api.livechatinc.com/v3.2/configuration/action/update_bot_agent`  |
| Required scopes| `agents-bot--my:rw`  |

#### Request

| Parameter                       | Required       | Data type | Notes                                                  |
| ------------------------------------ | ---------- | -------- | ------------------------------------------------------ |
| `id`                                 | Yes   | `string`      | Bot Agent ID                                           |
| `name`                               | No   | `string`       | Display name                                           |
| `avatar`                             | No   | `string`       | Avatar URL                                             |
| `status` __*__                       | No   | `string`       | Agent status                                           |
| `max_chats_count`                    | No      | `int`       | Maximum incoming chats that can be routed to an Agent. |
| `groups`                             | No | `object[]`       | Groups an Agent belongs to                            |
| `groups[].id`                        |  Yes    | `uint`      | Group ID, required only when `groups`'s present.       |
| `groups[].priority` __**__           | Yes   |  `string`     | Agent's priority in the group; required only when `groups` is included.    |
| `default_group_priority` __***__    |   No | `string`        | The default routing priority for a group without defined priority. |
| `webhooks`                           | No   | `object`       | Webhooks sent to an Agent                             |
| `webhooks.url`                       | Yes   | `string`      | Destination URL for webhooks; required only when `webhooks` is present.|
| `webhooks.secret_key`                | Yes   | `string`      | Secret sent in webhooks to verify the webhook's source; required when `webhooks` is included. 
| `webhooks.actions`                   | Yes | `object[]`      | [Triggering actions](#triggering-actions); required only when `webhooks` is included.|
| `webhooks.actions[].name`            | Yes   | `string`      | The name of the triggering action; required only when `webhooks` is included.|
| `webhooks.actions[].filters`         | No   | `object`       | Filters to check if a webhook should be triggered.        |
| `webhooks.actions[].additional_data` | No | `string[]`       | Additional data arriving with the webhook.          |



__*__ The table below presents the possible values for the `status` parameter:

| Possible values | Notes |
| ------------- |:-------------:|
| `accepting chats`  | Agent is logged in. The chat router routes incoming chats to the Agent.     |
| `not accepting chats` | Agent is logged in, but the chat router doesn't route incoming chats to the Agent. |
| `offline` | Agent isn't logged in.    |


__**__ The table below presents the possible values for the `groups[].priority` parameter:

| Possible values | Notes: |
| ------------- |:-------------:|
| `first`  | The highest chat routing priority. Agents with the `first` priority get chats before others from the same group, e.g. Bots can get chats before regular Agents.  |
| `normal` | The medium chat routing priority. Agents with the `normal` priority get chats before those with the `last` priority, when there are no Agents with the `first` priority available with free slots in the group. |
| `last` | The lowest chat routing priority. Agents with the `last` priority get chats when there are no Agents with the `first` or `normal` priority available with free slots in the group.   |


__***__ The table below presents the possible values for the `default_group_priority` parameter:

| Possible values |  Notes   |
| ------------- |:-------------:|
| `first`  | The highest chat routing priority. Agents with the `first` priority get chats before others from the same group, e.g. Bots can get chats before regular Agents.  |
| `normal` | The medium chat routing priority. Agents with the `normal` priority get chats before those with the `last` priority, when there are no Agents with the `first` priority available with free slots in the group. |
| `last` | The lowest chat routing priority. Agents with the `last` priority get chats when there are no Agents with the `first` or `normal` priority available with free slots in the group.   |
| `supervisor` | Bot works as `supervisor` so it will not be assigned to any chats.   |


#### Response

No response payload (`200 OK`).

</Text>

<Code>

<CodeSample path={'REQUEST'}>


```shell
curl -X POST \
  https://api.livechatinc.com/v3.0/configuration/action/update_bot_agent \
  -H 'Authorization: Bearer <your_access_token>' \
  -H 'Content-Type: application/json' \
  -d '{
      "id": "ce54714e3d2b53adbfff09dbdbdd56e9",
      "name": "New Bot Name"
      }'
```

</CodeSample>

</Code>

</Section>

<Section>

<Text>

### Get Bot Agents 


#### Specifics

|  |  |
|-------|--------|
| Method URL   | `https://api.livechatinc.com/v3.2/configuration/action/get_bot_agents`  |
| Required scopes| `agents-bot--my:ro` `agents-bot--all:ro`  |


#### Request

| Parameter          | Required | Type     | Notes                                                            |
| ------------------------ | -------- | -------- | ---------------------------------------------------------------- |
| `all`                |  No      | `bool` |  Get all Bot Agents, if `false` returns only caller's Bot Agents, default value is `false`|

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  https://api.livechatinc.com/v3.2/configuration/action/get_bot_agents \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <your_access_token>' \
  -d '{
        "all": false
	    }'
```

</CodeSample>

<CodeResponse>

```json
{
    "bot_agents": [{
        "id": "5c9871d5372c824cbf22d860a707a578",
        "name": "John Doe",
        "avatar": "livechat.s3.amazonaws.com/1011121/all/avatars/bdd8924fcbcdbddbeaf60c19b238b0b0.jpg",
        "status": "accepting chats"
    }]
}
```

</CodeResponse>

</Code>

</Section>


<Section>

<Text>

### Get Bot Agent Details


#### Specifics

|  |  |
|-------|--------|
| Method URL   | `https://api.livechatinc.com/v3.2/configuration/action/get_bot_agent_details`  |
| Required scopes| `agents-bot--my:ro` `agents-bot--all:ro`  |

#### Request

| Parameter       | Required | Type     | Notes        |
| --------------- | -------- | -------- | ------------ |
| `bot_agent_id`  |  Yes     | `string` | Bot Agent ID |

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  https://api.livechatinc.com/v3.2/configuration/action/get_bot_agent_details \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <your_access_token>' \
  -d '{
        "bot_agent_id": "5c9871d5372c824cbf22d860a707a578"
	    }'
```

</CodeSample>

<CodeResponse>

```json
{
    "bot_agent": {
        "id": "5c9871d5372c824cbf22d860a707a578",
        "name": "John Doe",
        "avatar": "livechat.s3.amazonaws.com/1011121/all/avatars/bdd8924fcbcdbddbeaf60c19b238b0b0.jpg",
        "status": "accepting chats",
        "application": {
            "client_id": "asXdesldiAJSq9padj"
        },
        "max_chats_count": 6,
        "groups": [{
            "id": 0,
            "priority": "normal"
        }, {
            "id": 1,
            "priority": "normal"
        }, {
            "id": 2,
            "priority": "first"
        }],
        "webhooks": {
            "url": "http://myservice.com/webhooks",
            "secret_key": "JSauw0Aks8l-asAa",
            "actions": [{
                "name": "incoming_chat_thread",
                "filters": {
                  "chat_properties": {
                     "source": {
                        "type": {
                           "values": ["facebook", "twitter"]
                        }
                      }
                  }
                }
            },{
                "name": "incoming_event",
                "additional_data": ["chat_properties"]
            }]
        }
    }
}
```

</CodeResponse>

</Code>

</Section>

# Properties

<Section>

<Text>

Properties are key-value storages. They can be set within a specific [location](#property-locations).

You can create properties within a license and configure them using the **Configuration API**. Properties are grouped in _namespaces_, which helps distinguishing which property belongs to a given integration. Your namespace is always named after your `application id`.

You can configure the property [type](#property-types), [location](#property-locations), and [domain](#property-domain).

## Property types

There are four property types:

- `int` (int32)
- `bool`
- `string`
- `tokenized_string`

The `tokenized_string` type is a string split to tokens before indexing in our search engine. It can be useful for longer strings, such as messages. It should not be used for keywords.

## Property locations

Properties can be set within the following locations:

- chat
- thread
- event
- license
- group

You can configure access to properties within those locations. For example, you could create a property visible only to agents in a chat and thread, but not in an event.

## Property domain

The **property domain** is a set of values that a property can be assigned to.

Property domain can be configured in two ways:

- by defining a set of values explicitly allowed in this property (for example `[1, 2, 3]`).
- by defining a range. All values within the range are allowed in this property. It works only for numeric types (for example a range from `1` to `3`).

### Test properties

Each license has some test properties that you can use to play with properties.

| Namespace | Property                    | Type               | Access                     |
| --------- | --------------------------- | ------------------ | -------------------------- |
| `test`    | `bool_property`             | `bool`             | rw for everyone everywhere |
| `test`    | `int_property`              | `int`              | rw for everyone everywhere |
| `test`    | `string_property`           | `string`           | rw for everyone everywhere |
| `test`    | `tokenized_string_property` | `tokenized_string` | rw for everyone everywhere |

The `tokenized_string` property is similar to the `string` type. The values of a `tokenized_string` are split in tokens to enable searching for each word separately.

</Text>

<Code>

<CodeSample path={'The general properties format'}>

```js
{
    "properties": {
        "<namespace>": {    
            "<property_name>": "<property_value>",    
            "<property_name>": "<property_value>"      
        }
    }
}
```

</CodeSample>

</Code>

</Section>

## Methods

| HTTP method | The Properties API endpoint |
|-------------|-----------------------------|
| `POST`      |`https://api.livechatinc.com/v3.2/configuration/action/<action>`|


| Required header   |      Value      |   |
|----------|:-------------:|------:|
| `Content-Type`	 |  `application/json`  |  |


<Section>

<Text>

### Create Properties 


#### Specifics

|  |  |
|-------|--------|
| Method URL   | `https://api.livechatinc.com/v3.2/configuration/action/create_properties`  |
| Required scopes| `properties--my:rw`(to create my _properties_ in my _namespace_)  |


#### Response

No response payload (`200 OK`).


| Parameter                                                  | Required            | Data type   | Notes                                                                                |
| ---------------------------------------------------------- | ------------------- | ----------- | ------------------------------------------------------------------------------------ |
| `<property_name>.type`                                     | Yes                 | `string`    | Possible values: `int`, `string`, `bool`, and `tokenized_string`                     |
| `<property_name>.locations`                                | Yes                 | `object`    |                                                                                      |
| `<property_name>.locations.<location>`                     | min. one `location` | `object`    | Possible values: `chat`, `thread`, `event`, `license`, `group`                       |
| `<property_name>.locations.<location>.access.<user>`       | min. one `user`     | `object`    | Possible values: `agent`, `customer`                                                 |
| `<property_name>.locations.<location>.access.<user>.read`  | Yes                 | `bool`      | If set to `true`, then `<user>` can read this property.                              |
| `<property_name>.locations.<location>.access.<user>.write` | Yes                 | `bool`      | If set to `true`, then `<user>` can write to this property.                          |
| `<property_name>.description`                              | No                  | `string`    | Property description                                                                 |
| `<property_name>.domain` __*__                             | No                  | `[<type>]`  | Array of values that properties can be set to.                                       |
| `<property_name>.range` __*__                              | No                  | `object`    | Range of values that properties can be set to.                                       |
| `<property_name>.range.from`                               | No                  | `int`       | Only values **equal** or **greater** than this parameter can be set to this property.|
| `<property_name>.range.to`                                 | No                  | `int`       | Only values **equal** or **lower** than this parameter can be set to this property.  |

__*)__ Only one `domain` and one `range` can be set for a single property.

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  https://api.livechatinc.com/v3.2/configuration/action/create_properties \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <your_access_token>' \
  -d '{
    "string_property": {
        "type": "int",
        "locations": {
            "chat": {
                "access": {
                    "agent": {
                        "read": true,
                        "write": true
                    },
                    "customer": {
                        "read": true,
                        "write": true
                    }
                }
            },
            "thread": {
                "access": {
                    "agent": {
                        "read": true,
                        "write": true
                    },
                    "customer": {
                        "read": true,
                        "write": true
                    }
                }
            },
        //  "event": {},
        //  "license": {},
        //  "group": {}
        }
    }
}'
```

</CodeSample>

</Code>

</Section>

<Section>

<Text>

### Get Property Configs

#### Specifics

|  |  |
|-------|--------|
| Method URL   | `https://api.livechatinc.com/v3.2/configuration/action/get_property_configs`  |
| Required scopes| `properties--my:ro` `properties--all:ro` (to create properties in all _namespaces_)  |


#### Request

| Parameter     | Required | Data type| Notes                                                                                 |
| ------------- | -------- | -------- | ------------------------------------------------------------------------------------- |
| `all`         |   No     | `bool`   |  If set to `true`, it returns all properties within a given license; default: `false`.| 

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  https://api.livechatinc.com/v3.2/configuration/action/get_property_configs \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <your_access_token>' \
  -d '{}'
```

</CodeSample>

<CodeResponse>

```json
{
    "0805e283233042b37f460ed8fbf22160": {
        "string_property": {
            "type": "string",
            "description": "",
            "locations": {
                "thread": {
                    "access": {
                        "agent": {
                            "read": true,
                            "write": true
                        },
                        "customer": {
                            "read": true,
                            "write": true
                        }
                    }
                },
                "chat": {
                    "access": {
                        "agent": {
                            "read": true,
                            "write": true
                        },
                        "customer": {
                            "read": true,
                            "write": true
                        }
                    }
                },
                // "event": {},
                // "license": {},
                // "group": {}
            }
        }
    }
}
```

</CodeResponse>

</Code>

</Section>

<Section>

<Text>

### Set License Properties

Sets a property value within a license. This operation **doesn't** overwrite the existing values.

#### Specifics

|  |  |
|-------|--------|
| Method URL     | `https://api.livechatinc.com/v3.2/configuration/action/set_license_properties`|
| Required scopes__*__| -  |

__*)__ If the requester's Client ID matches the namespace, setting license properties is always allowed. 
Otherwise, the permission depends on how the property was configured during [creation](#create-properties) (`<property_name>.locations.<location>.access.<user>.write`).

#### Request

| Parameter          | Required | Data type               | Notes                                                                               |
| ------------------ | -------- | ----------------------- | ----------------------------------------------------------------------------------- |
| `properties`       |   Yes    | [`object`](#properties) | An object with _namespaces_ as keys and _properties_ (grouped in objects) as values.| 

#### Response

No response payload (`200 OK`).

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  https://api.livechatinc.com/v3.2/configuration/action/set_license_properties \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <your_access_token>' \
  -d '{
        "properties": {
            "0805e283233042b37f460ed8fbf22160": {
                "string_property": "string value"
              }
          }
      }'
```

</CodeSample>

<CodeResponse>

```json
{}
```

</CodeResponse>

</Code>

</Section>


<Section>

<Text>

### Get License Properties

Returns the properties set within a license.

#### Specifics

|  |  |
|-------|--------|
| Method URL     | `https://api.livechatinc.com/v3.2/configuration/action/get_license_properties`|
| Required scopes__*__| -  |

__*)__ If the requester's Client ID matches the namespace, retrieving license properties is always allowed. 
Otherwise, the permission depends on how the property was configured during [creation](#create-properties) (`<property_name>.locations.<location>.access.<user>.read`).

#### Request

| Parameter          | Required | Data type  | Notes                       |
| ------------------ | -------- | ---------- | ----------------------------|
| `namespace_prefix` |   No     | `string`   | Properties namespace prefix | 
| `name_prefix`      |   No     | `string`   | Properties name prefix      | 

#### Response

No response payload (`200 OK`).

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  https://api.livechatinc.com/v3.2/configuration/action/get_license_properties \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <your_access_token>' \
  -d '
    {
      "namespace_prefix": "0",
      "name_prefix": "string"
    }'
```

</CodeSample>

<CodeResponse>

```json
{
  "0805e283233042b37f460ed8fbf22160": {
      "string_property": "string value"
  }
}
```

</CodeResponse>

</Code>

</Section>

<Section>

<Text>

### Delete License Properties

Deletes the properties set within a license.

#### Specifics

|  |  |
|-------|--------|
| Method URL     | `https://api.livechatinc.com/v3.2/configuration/action/delete_license_properties`|
| Required scopes__*__| -  |

__*)__ If the requester's Client ID matches the namespace, deleting license properties is always allowed. 
Otherwise, the permission depends on how the property was configured during [creation](#create-properties) (`<property_name>.locations.<location>.access.<user>.write`).

#### Request

| Parameter          | Required | Data type               | Notes                       |
| ------------------ | -------- | ----------------------- | ----------------------------|
| `properties`       |   Yes    | [`object`](#properties) | An object with _namespaces_ as keys and _property_names_ (in an array) as values.| 

#### Response

No response payload (`200 OK`).

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  https://api.livechatinc.com/v3.2/configuration/action/delete_license_properties \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <your_access_token>' \
  -d '{
    "properties": {
        "0805e283233042b37f460ed8fbf22160": ["string_property"]
          }
      }'
```

</CodeSample>

</Code>

</Section>

<Section>

<Text>

### Set Group Properties

Sets a property value within a group as the [property location](#property-locations). This operation **doesn't** overwrite the existing values.

#### Specifics

|  |  |
|-------|--------|
| Method URL     | `https://api.livechatinc.com/v3.2/configuration/action/set_group_properties`|
| Required scopes__*__| -  |

__*)__ If the requester's Client ID matches the namespace, setting group properties is always allowed. 
Otherwise, the permission depends on how the property was configured during [creation](#create-properties) (`<property_name>.locations.<location>.access.<user>.write`).

#### Request

| Parameter          | Required | Data type               | Notes                                                                               |
| ------------------ | -------- | ----------------------- | ----------------------------------------------------------------------------------- |
| `group_id`         |   Yes    | `number`                | ID of the group you set the properties for.                                      | 
| `properties`       |   Yes    | [`object`](#properties) | An object with _namespaces_ as keys and _properties_ (grouped in objects) as values.| 

#### Response

No response payload (`200 OK`).

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  https://api.livechatinc.com/v3.2/configuration/action/set_group_properties \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <your_access_token>' \
  -d '{
      "group_id": 1,
      "properties": {
          "0805e283233042b37f460ed8fbf22160": {
              "string_property": "group property value"
              }
          }
      }'
```

</CodeSample>

<CodeResponse>

```json
{}
```

</CodeResponse>

</Code>

</Section>

<Section>

<Text>

### Get Group Properties

Returns the properties set within a group.

#### Specifics

|  |  |
|-------|--------|
| Method URL     | `https://api.livechatinc.com/v3.2/configuration/action/get_group_properties`       |
| Required scopes__*__| -  |

__*)__ If the requester's Client ID matches the namespace, retrieving group properties is always allowed. 
Otherwise, the permission depends on how the property was configured during [creation](#create-properties) (`<property_name>.locations.<location>.access.<user>.read`).

#### Request

| Parameter          | Required | Data type  | Notes                       |
| ------------------ | -------- | ---------- | ----------------------------|
| `group_id`         |   Yes    | `number`   | ID of the group you retrieve properties from.| 
| `namespace_prefix` |   No     | `string`   | Properties namespace prefix                  | 
| `name_prefix`      |   No     | `string`   | Properties name prefix                       | 

#### Response

No response payload (`200 OK`).

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  https://api.livechatinc.com/v3.2/configuration/action/get_group_properties \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <your_access_token>' \
  -d '
    {
      "group_id": 1,
      "namespace_prefix": "0",
      "name_prefix": "string"
    }'
```

</CodeSample>

<CodeResponse>

```json
{
  "0805e283233042b37f460ed8fbf22160": {
      "string_property": "group property value"
  }
}
```

</CodeResponse>

</Code>

</Section>

<Section>

<Text>

### Delete Group Properties

Deletes the properties set within a group.

#### Specifics

|  |  |
|-------|--------|
| Method URL     | `https://api.livechatinc.com/v3.2/configuration/action/delete_group_properties`|
| Required scopes__*__| -  |

__*)__ If the requester's Client ID matches the namespace, deleting group properties is always allowed. 
Otherwise, the permission depends on how the property was configured during [creation](#create-properties) (`<property_name>.locations.<location>.access.<user>.write`).

#### Request

| Parameter          | Required | Data type               | Notes                       |
| ------------------ | -------- | ----------------------- | ----------------------------|
| `group_id`         |   Yes    | `number`                | ID of the group you delete properties from.                                      | 
| `properties`       |   Yes    | [`object`](#properties) | An object with _namespaces_ as keys and _property_names_ (in an array) as values.| 

#### Response

No response payload (`200 OK`).

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  https://api.livechatinc.com/v3.2/configuration/action/delete_group_properties \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <your_access_token>' \
  -d '{
      "group_id": 1,
      "properties": {
        "0805e283233042b37f460ed8fbf22160": ["string_property"]
          }
      }'
```

</CodeSample>

</Code>

</Section>

<Section>

<Text>

# Webhooks

Here's what you need to know about **webhooks**:

- Webhooks notify you when specific events are triggered. 
- They can be generated by both Web and RTM API actions. 
- Webhooks and pushes have similar payloads.

## Available webhooks

|                 |                                                                                                                                                                                                                                                                                                                                                                     |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Chats**       | [`incoming_chat_thread`](#incoming_chat_thread) [`thread_closed`](#thread_closed)                                                                                                                                                                                                                                                                                   |
| **Chat access** | [`access_granted`](#access_granted) [`access_revoked`](#access_revoked) [`access_set`](#access_set)                                                                                                                                                                                                                                                                 |
| **Chat users**  | [`chat_user_added`](#chat_user_added) [`chat_user_removed`](#chat_user_removed)                                                                                                                                                                                                                                                                                     |
| **Events**      | [`incoming_event`](#incoming_event) [`event_updated`](#event_updated) [`incoming_rich_message_postback`](#incoming_rich_message_postback)                                                                                                                                                                                                                           |
| **Properties**  | [`chat_properties_updated`](#chat_properties_updated) [`chat_properties_deleted`](#chat_properties_deleted) [`chat_thread_properties_deleted`](#chat_thread_properties_deleted) [`chat_thread_properties_updated`](#chat_thread_properties_updated) [`event_properties_updated`](#event_properties_updated) [`event_properties_deleted`](#event_properties_deleted) |
| **Thread tags** | [`chat_thread_tagged`](#chat_thread_tagged) [`chat_thread_untagged`](#chat_thread_untagged)                                                                                                                                                                                                                                                                         |
| **Status**      | [`agent_status_changed`](#agent_status_changed) [`agent_deleted`](#agent_deleted)| 
| **Customers**   | [`customer_created`](#customer_created)                                                                                                                                                                                                                                                                                                                             |
| **Other**       | [`events_marked_as_seen`](#events_marked_as_seen) [`follow_up_requested`](#follow_up_requested)                                                                                                                                                                                                                                                                     |


</Text>

<Code>

<CodeResponse title={'general webhook format'}>

```json
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "<action>",
  "license_id": "<license_id>",
  "payload": {
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

</CodeResponse>

</Code>

</Section>

## Chats

<Section>

<Text>

### `incoming_chat_thread`
Informs about a new thread coming in the chat. The webhook payload contains not only the new thread, but the whole chat data structure. If the chat was started with some initial events, the thread object contains them.  

#### Specifics

|                     |                                                           |
| ------------------- | --------------------------------------------------------- |
| **Action**          | `incoming_chat_thread`                                          |
| **Push equivalent in** | [`Agent Chat API`](/messaging/agent-chat-api/rtm-reference/#incoming_chat_thread) [`Customer Chat API`](/messaging/customer-chat-api/rtm-reference/#incoming_chat_thread) |

#### Webhook payload


| Object      | Notes                                  |
| ----------- | -------------------------------------- |
| `chat`      | [Chat data structure](/messaging/agent-chat-api/#chats)  |


</Text>

<Code>

<CodeResponse title={'Sample webhook'}>

```json
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "incoming_chat_thread",
  "license_id": 104130623,
  "payload": {
    "chat": {
		"id": "PJ0MRSHTDG",
		"users": [
			// array of "User" objects
		],
		"properties": {
			// "Property" object
		},
		"thread": {
			// "Thread" object
		  }
	  }
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

</CodeResponse>

</Code>

</Section>

<Section>

<Text>

### `thread_closed`
Informs that a thread was closed.

#### Specifics

|                     |                                                           |
| ------------------- | --------------------------------------------------------- |
| **Action**          | `thread_closed`                                          |
| **Push equivalent in** | [`Agent Chat API`](/messaging/agent-chat-api/rtm-reference/#thread_closed) [`Customer Chat API`](/messaging/customer-chat-api/rtm-reference/#thread_closed) |


#### Webhook payload

| Object      | Notes                                  |
| ----------- | -------------------------------------- |
| `user_id`   | Missing if a thread was closed by the router. |

</Text>

<Code>

<CodeResponse title={'Sample webhook'}>

```json
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "thread_closed",
  "license_id": 104130623,
  "payload": {
    "chat_id": "PJ0MRSHTDG",
	  "thread_id": "K600PKZON8",
	  "user_id": "b7eff798-f8df-4364-8059-649c35c9ed0c" // optional
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

</CodeResponse>

</Code>

</Section>

## Chat access

<Section>

<Text>

### `access_granted`
Informs that new, single access to a resource was granted. The existing access isn't overwritten.

#### Specifics

|                     |                                                           |
| ------------------- | --------------------------------------------------------- |
| **Action**          | `access_granted`                                          |
| **Push equivalent in** | [`Agent Chat API`](/messaging/agent-chat-api/rtm-reference/#access_granted) |

#### Webhook payload

| Object     | Notes         |
| ---------- | ------------- |
| `resource` | Resource type |
| `id`       | Resource id   |

</Text>

<Code>

<CodeResponse title={'Sample webhook'}>

```json
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "access_granted",
  "license_id": 104130623,
  "payload": {
    "resource": "chat",
    "id": "PJ0MRSHTDG",
    "access": {
      "group_ids": [1]
    }
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

</CodeResponse>

</Code>

</Section>

<Section>

<Text>

### `access_revoked`
Informs that access to a certain resource was revoked.

#### Specifics

|                     |                                                           |
| ------------------- | --------------------------------------------------------- |
| **Action**          | `access_revoked`                                          |
| **Push equivalent in** | [`Agent Chat API`](/messaging/agent-chat-api/rtm-reference/#access_revoked)|

#### Webhook payload

| Object     | Notes         |
| ---------- | ------------- |
| `resource` | Resource type |
| `id`       | Resource Id   |

</Text>

<Code>

<CodeResponse title={'Sample webhook'}>

```json
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "access_revoked",
  "license_id": 104130623,
  "payload": {
    "resource": "chat",
    "id": "PJ0MRSHTDG",
    "access": {
      "group_ids": [1]
    }
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

</CodeResponse>

</Code>

</Section>

<Section>

<Text>

### `access_set`
Informs that new, single access to a resource was set. The existing access is overwritten.

#### Specifics

|                     |                                                           |
| ------------------- | --------------------------------------------------------- |
| **Action**          | `access_set`                                          |
| **Push equivalent in** | [`Agent Chat API`](/messaging/agent-chat-api/rtm-reference/#access_set) [`Customer Chat API`](/messaging/customer-chat-api/rtm-reference/#access_set)|

#### Webhook payload

| Object     | Notes         |
| ---------- | ------------- |
| `resource` | Resource type |
| `id`       | Resource id   |

</Text>

<Code>

<CodeResponse title={'Sample webhook'}>

```json
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "access_set",
  "license_id": 104130623,
  "payload": {
    "resource": "chat",
    "id": "PJ0MRSHTDG",
    "access": {
      "group_ids": [1]
    }
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

</CodeResponse>

</Code>

</Section>

## Chat users

<Section>

<Text>

### `chat_user_added`
Informs that a user (Customer or Agent) was added to a chat.

#### Specifics

|                     |                                                           |
| ------------------- | --------------------------------------------------------- |
| **Action**          | `chat_user_added`                                          |
| **Push equivalent in** | [`Agent Chat API`](/messaging/agent-chat-api/rtm-reference/#chat_user_added) [`Customer Chat API`](/messaging/customer-chat-api/rtm-reference/#chat_user_added)|


#### Webhook payload

| Object      | Notes                                   |
| ----------- | --------------------------------------- |
| `user_type` | Possible values: `agent`, `customer`    |

</Text>

<Code>

<CodeResponse title={'Sample webhook'}>

```json
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "chat_user_added",
  "license_id": 104130623,
  "payload": {
    "chat_id": "PJ0MRSHTDG",
	  "thread_id": "K600PKZON8",
	  "user": {
	  	// "User > Customer" or "User > Agent" object
	      },
	  "user_type": "agent"
    },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

</CodeResponse>

</Code>

</Section>

<Section>

<Text>

### `chat_user_removed`
Informs that a user (Customer or Agent) was removed from a chat.

#### Specifics

|                     |                                                           |
| ------------------- | --------------------------------------------------------- |
| **Action**          | `chat_user_removed`                                          |
| **Push equivalent in** | [`Agent Chat API`](/messaging/agent-chat-api/rtm-reference/#chat_user_removed) [`Customer Chat API`](/messaging/customer-chat-api/rtm-reference/#chat_user_removed)|


#### Webhook payload

| Object      | Notes                                   |
| ----------- | --------------------------------------- |
| `user_type` | Possible values: `agent`, `customer`    |

</Text>

<Code>

<CodeResponse title={'Sample webhook'}>

```json
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "chat_user_removed",
  "license_id": 104130623,
  "payload": {
    "chat_id": "PJ0MRSHTDG",
	  "thread_id": "K600PKZON8",
	  "user_id": "agent1@example.com",
	  "user_type": "agent"
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

</CodeResponse>

</Code>

</Section>


## Events

<Section>

<Text>

### `incoming_event`
Informs about an incoming [event](/messaging/agent-chat-api/#events) sent to a chat.

#### Specifics

|                     |                                                           |
| ------------------- | --------------------------------------------------------- |
| **Action**          | `incoming_event`                                          |
| **Push equivalent in** | [`Agent Chat API`](/messaging/agent-chat-api/rtm-reference/#incoming_event) [`Customer Chat API`](/messaging/customer-chat-api/rtm-reference/#incoming_event)|

</Text>

<Code>

<CodeResponse title={'Sample webhook'}>

```json
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "incoming_event",
  "license_id": 104130623,
  "payload": {
    "chat_id": "PJ0MRSHTDG",
    "thread_id": "K600PKZON8",
    "event": {
      // "Event" object
    }
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

</CodeResponse>

</Code>

</Section>

<Section>

<Text>

### `event_updated`
Informs that an [event](/messaging/agent-chat-api/#events) was updated.

#### Specifics

|                     |                                                           |
| ------------------- | --------------------------------------------------------- |
| **Action**          | `event_updated`                                          |
| **Push equivalent in** | [`Agent Chat API`](/messaging/agent-chat-api/rtm-reference/#event_updated) [`Customer Chat API`](/messaging/customer-chat-api/rtm-reference/#event_updated)|

</Text>

<Code>

<CodeResponse title={'Sample webhook'}>

```json
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "event_updated",
  "license_id": 104130623,
  "payload": {
    "chat_id": "PJ0MRSHTDG",
    "thread_id": "K600PKZON8",
    "event": {
      // "Event" object
    }
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

</CodeResponse>

</Code>

</Section>

<Section>

<Text>

### `incoming_rich_message_postback`
Informs about an incoming [rich message](/messaging/agent-chat-api/#rich-message) postback. The webhook payload contains the info on the postback itself, as well as the chat it was sent in.

#### Specifics

|                     |                                                           |
| ------------------- | --------------------------------------------------------- |
| **Action**          | `incoming_rich_message_postback`                                          |
| **Push equivalent in** | [`Agent Chat API`](/messaging/agent-chat-api/rtm-reference/#incoming_rich_message_postback) [`Customer Chat API`](/messaging/customer-chat-api/rtm-reference/#incoming_rich_message_postback)|

</Text>

<Code>

<CodeResponse title={'Sample webhook'}>

```json
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "incoming_rich_message_postback",
  "license_id": 104130623,
  "payload": {
    "user_id": "b7eff798-f8df-4364-8059-649c35c9ed0c",
	  "chat_id": "PJ0MRSHTDG",
	  "thread_id": "K600PKZON8",
	  "event_id": "0affb00a-82d6-4e07-ae61-56ba5c36f743",
	  "postback": {
	  	"id": "action_yes",
	  	"toggled": true
	  }
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

</CodeResponse>

</Code>

</Section>

## Properties

<Section>

<Text>

### `chat_properties_updated`
Informs about those chat properties that were updated.

#### Specifics

|                     |                                                           |
| ------------------- | --------------------------------------------------------- |
| **Action**          | `chat_properties_updated`                                          |
| **Push equivalent in** | [`Agent Chat API`](/messaging/agent-chat-api/rtm-reference/#chat_properties_updated) [`Customer Chat API`](/messaging/customer-chat-api/rtm-reference/#chat_properties_updated)|


#### Webhook payload

| Object       | Notes                                                                                                      |
| ------------ | ---------------------------------------------------------------------------------------------------------- |
| `properties` | Not a full `properties` object. This push shows only the properties that have been recently updated. |

</Text>

<Code>

<CodeResponse title={'Sample webhook'}>

```json
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "chat_properties_updated",
  "license_id": 104130623,
  "payload": {
    "chat_id": "PJ0MRSHTDG",
	  "properties": {
	  	"0805e283233042b37f460ed8fbf22160": {
	  		"string_property": "string value"
	  	}
	  }
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

</CodeResponse>

</Code>

</Section>

<Section>

<Text>

### `chat_properties_deleted`
Informs about those chat properties that were deleted.

#### Specifics

|                     |                                                           |
| ------------------- | --------------------------------------------------------- |
| **Action**          | `chat_properties_deleted`                                          |
| **Push equivalent in** | [`Agent Chat API`](/messaging/agent-chat-api/rtm-reference/#chat_properties_deleted) [`Customer Chat API`](/messaging/customer-chat-api/rtm-reference/#chat_properties_deleted)|


#### Webhook payload

| Object       | Notes                                                                                                      |
| ------------ | ---------------------------------------------------------------------------------------------------------- |
| `properties` | Not a full `properties` object. This push shows only the properties that have been recently updated. |

</Text>

<Code>

<CodeResponse title={'Sample webhook'}>

```json
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "chat_properties_deleted",
  "license_id": 104130623,
  "payload": {
    "chat_id": "PJ0MRSHTDG",
	  "properties": {
		  "0805e283233042b37f460ed8fbf22160": [ 
        "string_property"
      ]
		}
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

</CodeResponse>

</Code>

</Section>

<Section>

<Text>

### `chat_thread_properties_updated`
Informs about those chat thread properties that were updated.

#### Specifics

|                     |                                                           |
| ------------------- | --------------------------------------------------------- |
| **Action**          | `chat_thread_properties_updated`                                          |
| **Push equivalent in** | [`Agent Chat API`](/messaging/agent-chat-api/rtm-reference/#chat_thread_properties_updated) [`Customer Chat API`](/messaging/customer-chat-api/rtm-reference/#chat_thread_properties_updated)|


#### Webhook payload

| Object       | Notes                                                                                                      |
| ------------ | ---------------------------------------------------------------------------------------------------------- |
| `properties` | Not a full `properties` object. This push shows only the properties that have been recently updated. |

</Text>

<Code>

<CodeResponse title={'Sample webhook'}>

```json
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "chat_thread_properties_updated",
  "license_id": 104130623,
  "payload": {
    "chat_id": "PJ0MRSHTDG",
	  "thread_id": "K600PKZON8",
	  "properties": {
	  	"0805e283233042b37f460ed8fbf22160": {
	  		"string_property": "string value"
	  	}
	  }
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

</CodeResponse>

</Code>

</Section>

<Section>

<Text>

### `chat_thread_properties_deleted`
Informs about those chat thread properties that were deleted.

#### Specifics

|                     |                                                           |
| ------------------- | --------------------------------------------------------- |
| **Action**          | `chat_thread_properties_deleted`                                          |
| **Push equivalent in** | [`Agent Chat API`](/messaging/agent-chat-api/rtm-reference/#chat_thread_properties_deleted) [`Customer Chat API`](/messaging/customer-chat-api/rtm-reference/#chat_thread_properties_deleted)|


#### Webhook payload

| Object       | Notes                                                                                                      |
| ------------ | ---------------------------------------------------------------------------------------------------------- |
| `properties` | Not a full `properties` object. This push shows only the properties that have been recently updated. |

</Text>

<Code>

<CodeResponse title={'Sample webhook'}>

```json
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "chat_thread_properties_deleted",
  "license_id": 104130623,
  "payload": {
	  "chat_id": "PJ0MRSHTDG",
	  "thread_id": "K600PKZON8",
	  "properties": {
	  	"0805e283233042b37f460ed8fbf22160": [
        "string_property"
          ]
	  	}
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

</CodeResponse>

</Code>

</Section>

<Section>

<Text>

### `event_properties_updated`
Informs about those event properties that were updated.

#### Specifics

|                     |                                                           |
| ------------------- | --------------------------------------------------------- |
| **Action**          | `event_properties_updated`                                          |
| **Push equivalent in** | [`Agent Chat API`](/messaging/agent-chat-api/rtm-reference/#event_properties_updated) [`Customer Chat API`](/messaging/customer-chat-api/rtm-reference/#event_properties_updated)|

#### Webhook payload

| Object       | Notes                                                                                                           |
| ------------ | --------------------------------------------------------------------------------------------------------------- |
| `properties` | This is not a full `properties` object. This webhook shows only the properties that have been recently updated. |

</Text>

<Code>

<CodeResponse title={'Sample webhook'}>

```json
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "event_properties_updated",
  "license_id": 104130623,
  "payload": {
    "chat_id": "PJ0MRSHTDG",
    "thread_id": "K600PKZON8",
    "event_id": "0affb00a-82d6-4e07-ae61-56ba5c36f743",
    "properties": {
      "0805e283233042b37f460ed8fbf22160": {
        "string_property": "property_value"
      }
    }
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

</CodeResponse>

</Code>

</Section>

<Section>

<Text>

### `event_properties_deleted`
Informs about those event properties that were deleted.

#### Specifics

|                     |                                                           |
| ------------------- | --------------------------------------------------------- |
| **Action**          | `event_properties_deleted`                                          |
| **Push equivalent in** | [`Agent Chat API`](/messaging/agent-chat-api/rtm-reference/#event_properties_deleted) [`Customer Chat API`](/messaging/customer-chat-api/rtm-reference/#event_properties_deleted)|


#### Webhook payload

| Object       | Notes                                                                                                           |
| ------------ | --------------------------------------------------------------------------------------------------------------- |
| `properties` | This is not a full `properties` object. This webhook shows only the properties that have been recently updated. |

</Text>

<Code>

<CodeResponse title={'Sample webhook'}>

```json
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "event_properties_deleted",
  "license_id": 104130623,
  "payload": {
    "chat_id": "PJ0MRSHTDG",
	  "thread_id": "K600PKZON8",
	  "event_id": "0affb00a-82d6-4e07-ae61-56ba5c36f743",
	  "properties": {
	  	"0805e283233042b37f460ed8fbf22160": [
        "string_property"
          ]
	  	}
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

</CodeResponse>

</Code>

</Section>

## Thread tags

<Section>

<Text>

### `chat_thread_tagged`
Informs that a chat thread was tagged.

#### Specifics

|                     |                                                           |
| ------------------- | --------------------------------------------------------- |
| **Action**          | `chat_thread_tagged`                                          |
| **Push equivalent in** | [`Agent Chat API`](/messaging/agent-chat-api/rtm-reference/#chat_thread_tagged)|

</Text>

<Code>

<CodeResponse title={'Sample webhook'}>

```json
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "chat_thread_tagged",
  "license_id": 104130623,
  "payload": {
    "chat_id": "PJ0MRSHTDG",
	  "thread_id": "K600PKZON8",
	  "tag": "bug_report"
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

</CodeResponse>

</Code>

</Section>

<Section>

<Text>

### `chat_thread_untagged`
Informs that a chat thread was untagged.

#### Specifics

|                     |                                                           |
| ------------------- | --------------------------------------------------------- |
| **Action**          | `chat_thread_untagged`                                          |
| **Push equivalent in** | [`Agent Chat API`](/messaging/agent-chat-api/rtm-reference/#chat_thread_untagged)|

</Text>

<Code>

<CodeResponse title={'Sample webhook'}>

```json
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "chat_thread_untagged",
  "license_id": 104130623,
  "payload": {
    "chat_id": "PJ0MRSHTDG",
	  "thread_id": "K600PKZON8",
	  "tag": "bug_report"
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

</CodeResponse>

</Code>

</Section>

## Status

<Section>

<Text>

### `agent_status_changed`
Informs that an Agent's status changed.

#### Specifics

|                     |                                                           |
| ------------------- | --------------------------------------------------------- |
| **Action**          | `agent_status_changed`                                          |
| **Push equivalent in** | [`Agent Chat API`](/messaging/agent-chat-api/rtm-reference/#agent_status_changed)|

#### Webhook payload

| Object      | Notes                                  |
| ----------- | -------------------------------------- |
| `status`   | Possible values: `accepting chats`, `not accepting chats`, `offline` | 

</Text>

<Code>

<CodeResponse title={'Sample webhook'}>

```json
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "agent_status_changed",
  "license_id": 104130623,
  "payload": {
    "agent_id":"agent1@example.com",
    "status": "accepting chats"
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

</CodeResponse>

</Code>

</Section>

<Section>

<Text>

### `agent_deleted`
Informs that an Agent's account was deleted.

#### Specifics

|                     |                                                           |
| ------------------- | --------------------------------------------------------- |
| **Action**          | `agent_deleted`                                          |
| **Push equivalent in** | [`Agent Chat API`](/messaging/agent-chat-api/rtm-reference/#agent_deleted)|

</Text>

<Code>

<CodeResponse title={'Sample webhook'}>

```json
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "agent_deleted",
  "license_id": 104130623,
  "payload": {
    "agent_id": "agent1@example.com"
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

</CodeResponse>

</Code>

</Section>

## Customers

<Section>

<Text>

### `customer_created`
Informs that a new Customer registered.

#### Specifics

|                     |                                                           |
| ------------------- | --------------------------------------------------------- |
| **Action**          | `customer_created`                                          |
| **Push equivalent in** | [`Agent Chat API`](/messaging/agent-chat-api/rtm-reference/#customer_created)|

</Text>

<Code>

<CodeResponse title={'Sample webhook'}>

```json
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "customer_created",
  "license_id": 104130623,
  "payload": {
    "customer": {
    // "User > Customer" object
    }
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

</CodeResponse>

</Code>

</Section>

## Other

<Section>

<Text>

### `events_marked_as_seen`
Informs that a user has seen events up to a specific time.

#### Specifics

|                     |                                                           |
| ------------------- | --------------------------------------------------------- |
| **Action**          | `events_marked_as_seen`                                          |
| **Push equivalent in** | [`Agent Chat API`](/messaging/agent-chat-api/rtm-reference/#events_marked_as_seen) [`Customer Chat API`](/messaging/customer-chat-api/rtm-reference/#events_marked_as_seen)|

</Text>

<Code>

<CodeResponse title={'Sample webhook'}>

```json
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "events_marked_as_seen",
  "license_id": 104130623,
  "payload": {
    "user_id": "b7eff798-f8df-4364-8059-649c35c9ed0c",
    "chat_id": "PJ0MRSHTDG",
    "seen_up_to": "2017-10-12T15:19:21.010200Z"
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

</CodeResponse>

</Code>

</Section>

<Section>

<Text>

### `follow_up_requested`

Informs that the customer requested follow up for the conversation. It is sent when either there was no agent in the chat or the customer didn't read all the messages from the agent.

#### Specifics

|                     |                                                           |
| ------------------- | --------------------------------------------------------- |
| **Action**          | `follow_up_requested`                                     |
| **Push equivalent in** | n/a                                                    |

</Text>

<Code>

<CodeResponse title={'Sample webhook'}>

```json
{
  "webhook_id": "<webhook_id>",
  "secret_key": "<secret_key>",
  "action": "follow_up_requested",
  "license_id": 104130623,
  "payload": {
    "customer_id": "b7eff798-f8df-4364-8059-649c35c9ed0c",
    "chat_id": "PJ0MRSHTDG",
    "thread_id": "K600PKZON8",
  },
  "additional_data": {
    "chat_properties": { //optional
        // chat properties
    }
  }
}
```

</CodeResponse>

</Code>

</Section>

## Methods


| HTTP method  | The Webhooks API endpoint |
|-------|--------|
| `POST`|`https://api.livechatinc.com/v3.2/configuration/action/<action>`   |


| Required header   |      Value      |   |
|----------|:-------------:|------:|
| `Content-Type`	 |  `application/json`  |  |


<Section>

<Text>

### Register Webhook


#### Specifics

|  |  |
|-------|--------|
| Method URL   | `https://api.livechatinc.com/v3.2/configuration/action/register_webhook`  |
| Required scopes| `webhooks--my:rw`  |


| Request object                           | Required   | Data type  | Notes                                                                                                           |
| ---------------------------------------- | ---------- | ---------- | --------------------------------------------------------------------------------------------------------------- |
| `action`__*__                            | yes        | `string`   | The [action](#triggering-actions) that triggers sending a webhook.                                              | 
| `secret_key`                             | yes        | `string`   | The secret key sent in webhooks to verify the source of a webhook.                                              |
| `url`                                    | yes        | `string`   | Destination URL for the webhook                                                                                 |
| `additional_data`                        | no         | `[]string` | Additional data arriving with the webhook. Value: `chat properties` (all actions except for `agent_status_changed`, `agent_deleted`, `customer_created`)                                                             |
| `description`                            | no         | `string`   | Webhook description                                                                                             |
| `filters`                                | no         | `object`   | Filters to check if a webhook should be triggered.                                                              |
| `filters.author_type`                    | no         | `string`   | Possible values: `customer`, `agent`; allowed only for the `incoming_event` action.                             |
| `filters.only_my_chats`                  | no         | `bool`     | `true` or `false`; triggers webhooks only for chats with the property `source.client_id` set to my `client_id`. |
| `filters.chat_member_ids`                | no         | `object`   | Only one filter (`agents_any` or `agents_exclude`) is allowed.                                                  |
| `filters.chat_member_ids.agents_any`     | no         | `[]string` | Array of Agents' ids; if any specified Agent is in the chat, the webhook will be triggered.                     |
| `filters.chat_member_ids.agents_exclude` | no         | `[]string` | Array of Agents' ids; If any specified Agent is in the chat, the webhook will not be triggered.                 |

#### Triggering actions

__*__ The table below presents the possible values for the `action` parameter.

| Possible action                                                     | Available filters                                 |
| ------------------------------------------------------------------- | -------------------------------------------------:|
| [`incoming_chat_thread`](#incoming-chat-thread)                     | `chat_member_ids`, `only_my_chats`                |
| [`thread_closed`](#thread-closed)                                   | `chat_member_ids`, `only_my_chats`                |
| [`access_granted`](#access-granted)                                 | `chat_member_ids`, `only_my_chats`                |
| [`access_revoked`](#access-revoked)                                 | `chat_member_ids`, `only_my_chats`                |
| [`access_set`](#access-set)                                         | `chat_member_ids`, `only_my_chats`                |
| [`chat_user_added`](#chat-user-added)                               | `chat_member_ids`, `only_my_chats`                |
| [`chat_user_removed`](#chat-user-removed)                           | `chat_member_ids`, `only_my_chats`                |
| [`incoming_event`](#incoming-event)                                 | `chat_member_ids`, `author_type`, `only_my_chats` |
| [`event_updated`](#event-updated)                                   | `chat_member_ids`, `author_type`, `only_my_chats` |
| [`incoming_rich_message_postback`](#incoming-rich-message-postback) | `chat_member_ids`, `only_my_chats`                |
| [`chat_properties_updated`](#chat-properties-updated)               | `chat_member_ids`, `only_my_chats`                |
| [`chat_properties_deleted`](#chat-properties-deleted)               | `chat_member_ids`, `only_my_chats`                |
| [`chat_thread_properties_updated`](#chat-thread-properties-updated) | `chat_member_ids`, `only_my_chats`                |
| [`chat_thread_properties_deleted`](#chat-thread-properties-deleted) | `chat_member_ids`, `only_my_chats`                |
| [`event_properties_updated`](#event-properties-updated)             | `chat_member_ids`, `only_my_chats`                |
| [`event_properties_deleted`](#event-properties-deleted)             | `chat_member_ids`, `only_my_chats`                |
| [`chat_thread_tagged`](#chat-thread-tagged)                         | `chat_member_ids`, `only_my_chats`                |
| [`chat_thread_untagged`](#chat-thread-untagged)                     | `chat_member_ids`, `only_my_chats`                |
| [`agent_status_changed`](#agent-status-changed)                     | -                                                 |
| [`agent_deleted`](#agent-deleted)                                   | `chat_member_ids`                                 |
| [`customer_created`](#customer-created)                             | -                                                 |
| [`events_marked_as_seen`](#events-marked-as-seen)                   | `chat_member_ids`, `only_my_chats`                |
| [`follow_up_requested`](#follow-up-requested)                       | `chat_member_ids`, `only_my_chats`                |

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  https://api.livechatinc.com/v3.2/configuration/action/register_webhook \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <your_access_token>' \
  -d '{
        "url": "http://myservice.com/webhooks",
        "description": "Test webhook",
        "action": "thread_closed",
        "secret_key": "laudla991lamda0pnoaa0"  
		  }'
```

</CodeSample>

<CodeResponse>

```json
{
    "webhook_id": "pqi8oasdjahuakndw9nsad9na"
}
```

</CodeResponse>

</Code>

</Section>


<Section>

<Text>

### Get Webhooks Config


#### Specifics

|  |  |
|-------|--------|
| Method URL   | `https://api.livechatinc.com/v3.2/configuration/action/get_webhooks_config`  |
| Required scopes| `webhooks--my:rw` `webhooks--all:ro`  |

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  https://api.livechatinc.com/v3.2/configuration/action/get_webhooks_config \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <your_access_token>' \
  -d '{}'
```

</CodeSample>

<CodeResponse>

```json
{
  [
    {
      "webhook_id": "pqi8oasdjahuakndw9nsad9na",
      "url": "http://myservice.com/webhooks",
      "description": "Test webhook",
      "action": "thread_closed",
      "filters": {
        "chat_member_ids": {
          "agents_any": ["johndoe@mail.com"]
        }
      },
      "owner_client_id": "asXdesldiAJSq9padj"
    }
  ]
}
```

</CodeResponse>

</Code>

</Section>

<Section>

<Text>

### Unregister Webhook


#### Specifics

|  |  |
|-------|--------|
| Method URL   | `https://api.livechatinc.com/v3.2/configuration/action/unregister_webhook`  |
| Required scopes| `webhooks--my:rw` `webhooks--all:rw`  |


#### Request

| Parameter | Required     | Data type | Notes      |
| -------------- | -------- | -------- | ---------- |
| `webhook_id`   | Yes | `string`      | Webhook ID |


#### Response

No response payload (`200 OK`).

</Text>

<Code>

<CodeSample path={'REQUEST'}>

```shell
curl -X POST \
  https://api.livechatinc.com/v3.2/configuration/action/unregister_webhook \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer <your_access_token>' \
  -d '{
        "webhook_id": "pqi8oasdjahuakndw9nsad9na"
		  }'
```

</CodeSample>

</Code>

</Section>

# Contact us

If you found a bug or a typo, you can let us know directly on GitHub. In case of any questions or feedback, don't hesitate to contact us at [developers@livechatinc.com] (mailto:developers@livechatinc.com). We'll be happy to hear from you!